(function(e){function t(t){for(var r,i,s=t[0],l=t[1],c=t[2],d=0,p=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&p.push(a[i][0]),a[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);u&&u(t);while(p.length)p.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,s=1;s<n.length;s++){var l=n[s];0!==a[l]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={app:0},o=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"01f3":function(e,t,n){},1:function(e,t){},"1c0d":function(e,t,n){"use strict";n("dfa6")},"21bb":function(e,t,n){"use strict";n("62d1")},"2cd7":function(e,t,n){"use strict";n("549e")},"34c4":function(e,t,n){"use strict";n("a547")},"549e":function(e,t,n){},"5c49":function(e,t,n){},"5eb6":function(e,t,n){"use strict";n("cc33")},"62d1":function(e,t,n){},"681b":function(e,t,n){"use strict";n("dad7")},a547:function(e,t,n){},c820:function(e,t,n){"use strict";n("5c49")},cc33:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[e.loggedIn?n("v-navigation-drawer",{attrs:{app:"",permanent:"","expand-on-hover":""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[n("v-list",{attrs:{nav:"",dense:""}},[n("v-list-item-group",{attrs:{act:""}},[n("v-list-item",{attrs:{to:"/"}},[n("v-list-item-icon",[n("v-icon",[e._v("mdi-home")])],1),n("v-list-item-title",[e._v("Begin")])],1),n("v-list-item",{attrs:{to:"/personen"}},[n("v-list-item-icon",[n("v-icon",[e._v("mdi-account-multiple")])],1),n("v-list-item-title",[e._v("Personen")])],1),n("v-list-item",{attrs:{disabled:null==e.bestellingUrl,to:e.bestellingUrl}},[n("v-list-item-icon",[n("v-icon",[e._v("mdi-receipt")])],1),n("v-list-item-title",[e._v("Invoer")])],1),n("v-list-item",{attrs:{to:"/bestellingen"}},[n("v-list-item-icon",[n("v-icon",[e._v("mdi-view-list")])],1),n("v-list-item-title",[e._v("Bestellingen")])],1),n("v-list-item",{attrs:{to:"/beheer"}},[n("v-list-item-icon",[n("v-icon",[e._v("mdi-wrench")])],1),n("v-list-item-title",[e._v("Beheer")])],1),n("v-list-item",{attrs:{to:"/logout"}},[n("v-list-item-icon",[n("v-icon",[e._v("mdi-exit-to-app")])],1),n("v-list-item-title",[e._v("Uitloggen")])],1)],1)],1)],1):e._e(),n("v-app-bar",{attrs:{app:""}},[n("v-toolbar-title",[e._v(" C.S.R. Bar "),e.vertrouwd?n("span",[e._v("- "+e._s(e.vertrouwd.naam))]):e._e()]),n("v-spacer"),n("clock")],1),n("v-main",[n("v-container",{attrs:{fluid:""}},[n("router-view")],1)],1),n("v-overlay",{attrs:{value:e.loading}},[n("v-progress-circular",{attrs:{indeterminate:"",size:"64"}})],1)],1)},o=[],i=n("1da1"),s=(n("96cf"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[e._v(e._s(e.tijd))])}),l=[],c=r["a"].extend({name:"Clock",data:function(){return{date:new Date}},created:function(){var e=this;setInterval((function(){e.date=new Date}),1e3)},computed:{tijd:function(){return this.date.toLocaleTimeString("nl-NL")}}}),u=c,d=n("2877"),p=Object(d["a"])(u,s,l,!1,null,"20371285",null),v=p.exports,m=r["a"].extend({components:{Clock:v},name:"App",data:function(){return{loading:!0,drawer:!1}},computed:{loggedIn:function(){return Boolean(this.$store.getters.token)},bestellingUrl:function(){var e=this.$store.state.user.selectie;return e?"/invoer/".concat(e):null},vertrouwd:function(){return this.$store.state.user.locatieToken}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.loggedIn){t.next=9;break}return t.prev=1,t.next=4,e.$store.dispatch("postLogin");case 4:return t.prev=4,e.loading=!1,t.finish(4);case 7:t.next=10;break;case 9:e.loading=!1;case 10:case"end":return t.stop()}}),t,null,[[1,,4,7]])})))()}}),f=m,h=n("6544"),g=n.n(h),b=n("7496"),w=n("40dc"),k=n("a523"),x=n("132d"),_=n("8860"),j=n("da13"),y=n("1baa"),O=n("34c3"),V=n("5d23"),T=n("f6c4"),B=n("f774"),$=n("a797"),C=n("490a"),S=n("2fa4"),P=n("2a7f"),I=Object(d["a"])(f,a,o,!1,null,null,null),R=I.exports;g()(I,{VApp:b["a"],VAppBar:w["a"],VContainer:k["a"],VIcon:x["a"],VList:_["a"],VListItem:j["a"],VListItemGroup:y["a"],VListItemIcon:O["a"],VListItemTitle:V["c"],VMain:T["a"],VNavigationDrawer:B["a"],VOverlay:$["a"],VProgressCircular:C["a"],VSpacer:S["a"],VToolbarTitle:P["a"]});var L=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("toast-component",{ref:"toast"}),n("dialog-component",{ref:"dialog"})],1)},E=[],A=n("5530"),D=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-snackbar",{attrs:{bottom:"bottom"===e.options.y,centered:"centered"===e.options.x,color:e.options.color,left:"left"===e.options.x,right:"right"===e.options.x,timeout:e.options.timeout,top:"top"===e.options.y},scopedSlots:e._u([{key:"action",fn:function(t){var r=t.attrs;return[n("v-btn",e._b({attrs:{color:"white",text:"",icon:""},on:{click:e.close}},"v-btn",r,!1),[n("v-icon",[e._v("mdi-close")])],1)]}}]),model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},[e._v(" "+e._s(e.text)+" ")])},N=[],z=(n("d3b7"),{x:"left",y:"bottom",timeout:3e3,color:"default"}),U=r["a"].extend({data:function(){return{model:!1,promise:null,text:{},options:{}}},methods:{show:function(e,t){var n=this;return new Promise((function(r,a){n.model&&(n.model=!1),n.$nextTick((function(){n.promise={resolve:r,reject:a},n.text=e,n.options=Object(A["a"])(Object(A["a"])({},z),t),n.model=!0}))}))},close:function(){var e;null===(e=this.promise)||void 0===e||e.resolve(!0),this.model=!1}}}),W=U,F=n("8336"),M=n("2db4"),K=Object(d["a"])(W,D,N,!1,null,null,null),H=K.exports;g()(K,{VBtn:F["a"],VIcon:x["a"],VSnackbar:M["a"]});var J=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{"max-width":"500",persistent:""},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},[n("v-card",{staticClass:"text-center py-5"},[e.data.type?n("v-icon",{staticClass:"py-5",attrs:{color:e._f("color")(e.data.type),size:"128"}},[e._v(e._s(e._f("icon")(e.data.type)))]):e._e(),e.data.title?n("v-card-title",{staticClass:"justify-center headline"},[e._v(e._s(e.data.title))]):e._e(),n("v-card-text",[e._v(" "+e._s(e.data.text)+" "),"prompt"===e.options.type?n("v-text-field",{staticClass:"mt-5",attrs:{clearable:"",outlined:""},model:{value:e.dataInput,callback:function(t){e.dataInput=t},expression:"dataInput"}}):e._e()],1),n("v-card-actions",{staticClass:"justify-center"},["confirm"===e.options.type?[n("v-btn",{attrs:{large:"",width:"120"},on:{click:function(t){return t.stopPropagation(),e.no.apply(null,arguments)}}},[e._v(e._s(e.options.noText))]),n("v-btn",{staticClass:"primary",attrs:{dark:"",large:"",width:"120"},on:{click:function(t){return t.stopPropagation(),e.yes.apply(null,arguments)}}},[e._v(e._s(e.options.yesText))])]:"prompt"===e.options.type?[n("v-btn",{attrs:{large:"",width:"120"},on:{click:function(t){return t.stopPropagation(),e.close.apply(null,arguments)}}},[e._v(e._s(e.options.noText))]),n("v-btn",{staticClass:"primary",attrs:{dark:"",large:"",width:"120"},on:{click:function(t){return t.stopPropagation(),e.yesPrompt.apply(null,arguments)}}},[e._v(e._s(e.options.yesText))])]:[n("v-btn",{attrs:{large:"",width:"120"},on:{click:function(t){return t.stopPropagation(),e.yes.apply(null,arguments)}}},[e._v(e._s(e.options.yesText))])]],2)],1)],1)},G=[],Z={x:"left",y:"bottom",timeout:3e3,color:"default",noText:"Annuleren",yesText:"OK"},X=r["a"].extend({data:function(){return{model:!1,promise:null,data:{},dataInput:"",options:{}}},filters:{icon:function(e){switch(e){case"success":return"mdi-check-circle-outline";case"info":return"mdi-information-outline";case"warning":return"mdi-alert-decagram";case"error":return"mdi-alert";default:return""}},color:function(e){switch(e){case"success":return"success";case"info":return"info";case"warning":return"warning";case"error":return"error";default:return""}}},methods:{show:function(e,t){var n=this;return new Promise((function(r,a){n.model&&(n.model=!1),n.$nextTick((function(){n.promise=Object.assign({},{resolve:r,reject:a}),n.data=Object(A["a"])(Object(A["a"])({},n.data),e),n.options=Object(A["a"])(Object(A["a"])({},Z),t),n.model=!0}))}))},yesPrompt:function(){var e;this.dataInput&&(null===(e=this.promise)||void 0===e||e.resolve(this.dataInput),this.close())},yes:function(){var e;null===(e=this.promise)||void 0===e||e.resolve(!0),this.close()},no:function(){var e;null===(e=this.promise)||void 0===e||e.reject(!1),this.close()},close:function(){this.dataInput="",this.data={},this.options={},this.model=!1}}}),Y=X,q=n("b0af"),Q=n("99d9"),ee=n("169a"),te=n("8654"),ne=Object(d["a"])(Y,J,G,!1,null,null,null),re=ne.exports;g()(ne,{VBtn:F["a"],VCard:q["a"],VCardActions:Q["a"],VCardText:Q["c"],VCardTitle:Q["d"],VDialog:ee["a"],VIcon:x["a"],VTextField:te["a"]});var ae=r["a"].extend({components:{ToastComponent:H,DialogComponent:re},data:function(){return{options:{dialog:{},toast:{}}}},computed:{},methods:{toast:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.$refs.toast.show(e,Object(A["a"])(Object(A["a"])({},null!==(t=null===(n=this.options)||void 0===n?void 0:n.toast)&&void 0!==t?t:{}),r))},show:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.$refs.dialog.show(e,Object(A["a"])(Object(A["a"])({},null!==(t=null===(n=this.options)||void 0===n?void 0:n.dialog)&&void 0!==t?t:{}),r))},confirm:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.show(e,Object(A["a"])(Object(A["a"])({},t),{},{type:"confirm"}))},prompt:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.show(e,Object(A["a"])(Object(A["a"])({},t),{},{type:"prompt"}))}}}),oe=ae,ie=Object(d["a"])(oe,L,E,!1,null,null,null),se=ie.exports,le={install:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.extend(se),r=new n({vuetify:t.vuetify,data:{options:t.options}});e.prototype.$nextTick((function(){var n;e.prototype.$notify=r.$mount(),null===(n=document.getElementById(t.container||"app"))||void 0===n||n.appendChild(r.$el)}))}},ce=n("f309"),ue=n("4642");r["a"].use(ce["a"]);var de=new ce["a"]({theme:{dark:!0,themes:{light:{primary:"#11273a"},dark:{primary:"#607D8B"}}},lang:{locales:{nl:ue["a"]},current:"nl"}});r["a"].use(le,{vuetify:de});var pe=de,ve=n("2909"),me=(n("4e827"),n("4de4"),n("07ac"),n("caad"),n("2532"),n("c1f9"),n("d81d"),n("e9c4"),n("2f62")),fe=n("bc3a"),he=n.n(fe),ge=(n("2ca0"),n("8c4f")),be=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-overlay",{attrs:{value:!0}},[n("div",{staticClass:"d-flex flex-column align-center"},[n("v-progress-circular",{attrs:{indeterminate:"",size:"64"}}),n("span",{staticClass:"pt-2"},[e._v(e._s(e.msg))])],1)])},we=[],ke=n("a981"),xe=n.n(ke),_e=new xe.a({clientId:"bar",authorizationUri:"".concat("https://csrdelft.nl","/authorize"),accessTokenUri:"".concat("https://csrdelft.nl","/api/v3/token"),redirectUri:"".concat(window.location.origin,"/auth/callback"),scopes:["BAR:NORMAAL","BAR:BEHEER","BAR:TRUST"]}),je=_e,ye=r["a"].extend({name:"Authorize",data:function(){return{msg:"Wachten op autorisatie",loading:!1}},methods:{setLoading:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.loading=!1,t.msg=e,n.next=4,t.$nextTick();case 4:t.loading=!0;case 5:case"end":return n.stop()}}),n)})))()}},created:function(){var e=this;this.$store.state.user.tokenData?this.$router.push("/"):(window.open(je.token.getUri({query:{"remote-login":"true"}})),this.loading=!0,window.oauth2Callback=function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.setLoading("Token laden...");case 2:return t.prev=2,t.next=5,je.token.getToken(n);case 5:return r=t.sent,t.next=8,e.$store.commit("setToken",r.data);case 8:t.next=12;break;case 10:t.prev=10,t.t0=t["catch"](2);case 12:return t.next=14,e.setLoading("Profiel laden...");case 14:return t.next=16,e.$store.dispatch("postLogin");case 16:return e.loading=!1,t.next=19,e.$router.push("/");case 19:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}())}}),Oe=ye,Ve=Object(d["a"])(Oe,be,we,!1,null,"0db03346",null),Te=Ve.exports;g()(Ve,{VOverlay:$["a"],VProgressCircular:C["a"]});var Be=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v("Redirecting back")])},$e=[],Ce=r["a"].extend({name:"AuthCallback",created:function(){window.opener&&window.opener.oauth2Callback(window.location.href),window.close()}}),Se=Ce,Pe=Object(d["a"])(Se,Be,$e,!1,null,"aea0d49a",null),Ie=Pe.exports,Re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.persoon?n("div",[n("v-app-bar",{attrs:{flat:"",color:e.persoon.saldo>0?"success":"error"}},[n("v-toolbar-title",[e._v(e._s(e.persoon.weergave))])],1),n("v-row",[n("v-col",{attrs:{lg:"9"}},[n("v-row",{staticClass:"bestelling-inhoud"},e._l(e.bestellingInhoud,(function(t){return n("v-col",{key:t.product.id+" "+t.aantal,attrs:{lg:"3"}},[n("v-card",{staticClass:"product",on:{click:function(n){return e.verwijderInvoer(t.product.id)}}},[n("v-card-title",{staticClass:"product-title"},[e._v(" "+e._s(t.product.beschrijving)+" "),n("v-spacer"),n("v-btn",{attrs:{icon:""}},[n("v-icon",[e._v("mdi-close")])],1)],1),n("v-card-text",{staticClass:"text-h5"},[e._v(e._s(t.aantal))])],1)],1)})),1),n("ProductWeergave",{attrs:{producten:e.producten},on:{selecteer:e.selecteerInvoer}})],1),n("v-col",{attrs:{lg:"3"}},[n("Numpad",{attrs:{"default-value":"1"},model:{value:e.aantal,callback:function(t){e.aantal=t},expression:"aantal"}}),n("BestellingSamenvatting",{attrs:{"bestelling-laden":e.bestellingLaden,saldo:e.saldo,totaal:e.totaal,annuleer:e.annuleer,plaatsBestelling:e.plaatsBestelling}})],1)],1)],1):e._e(),n("v-snackbar",{attrs:{top:"",color:"error",timeout:"5000"},scopedSlots:e._u([{key:"action",fn:function(t){var r=t.attrs;return[n("v-btn",e._b({attrs:{color:"white",text:""},on:{click:function(t){e.notificatieWeergeven=!1}}},"v-btn",r,!1),[e._v(" Sluiten ")])]}}]),model:{value:e.notificatieWeergeven,callback:function(t){e.notificatieWeergeven=t},expression:"notificatieWeergeven"}},[e._v(" "+e._s(e.notificatie)+" ")])],1)},Le=[],Ee=(n("ac1f"),n("5319"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("SimpleKeyboard",{attrs:{keyboardClass:"numpad",layout:["7 8 9","4 5 6","1 2 3","{bksp} 0 {neg}"],display:{"{bksp}":"<","{neg}":"-"},modelValue:e.modelValue,defaultValue:e.defaultValue},on:{"update:modelValue":function(t){return e.$emit("update:modelValue",t)}}})}),Ae=[],De=function(){var e,t=this,n=t.$createElement,r=t._self._c||n;return r("div",{staticClass:"d-flex flex-column align-center"},[r("v-text-field",{ref:"textField",style:{width:"100%"},attrs:{value:t.modelValue,placeholder:t.placeholder},on:{input:t.onChange}}),r("div",{class:(e={"d-none d-md-flex flex-column":!0},e[t.keyboardClass]=!0,e)},t._l(t.layout,(function(e,n){return r("span",{key:n,staticClass:"keyboard d-inline-flex",style:{marginLeft:n*(t.staggered?32:0)+"px"}},t._l(e.split(" "),(function(e){return r("v-btn",{key:e,class:{"ma-1 keyboard-button":!0,special:e.startsWith("{")},on:{click:function(n){return t.onKeyPress(e)}}},[t._v(" "+t._s(e in t.display?t.display[e]:e)+" ")])})),1)})),0)],1)},Ne=[],ze=(n("fb6a"),r["a"].extend({name:"SimpleKeyboard",model:{prop:"modelValue",event:"update:modelValue"},props:{layout:{default:function(){return["Q W E R T Y U I O P {bksp}","A S D F G H J K L {leeg}","Z X C V B N M {space}"]},type:Array},display:{default:function(){return{"{leeg}":"Leeg","{space}":"Spatie","{bksp}":"Delete"}},type:Object},staggered:{default:!1,type:Boolean},keyboardClass:{default:"simple-keyboard",type:String},modelValue:{type:String},placeholder:{default:"",type:String},grabFocus:{default:!1,type:Boolean}},mounted:function(){this.grabFocus&&this.$refs.textField.focus()},methods:{onChange:function(e){this.$emit("update:modelValue",e)},onKeyPress:function(e){switch(this.$emit("keypress",e),e){case"{leeg}":this.onChange("");break;case"{space}":this.onChange(this.modelValue+" ");break;case"{neg}":this.handleNeg();break;case"{bksp}":this.onChange(this.modelValue.slice(0,-1));break;default:this.onChange(this.modelValue+e);break}},handleNeg:function(){this.modelValue&&this.modelValue.startsWith("-")?this.onChange(this.modelValue.slice(1)):""===this.modelValue?this.onChange("-1"):this.onChange("-".concat(this.modelValue))}}})),Ue=ze,We=(n("1c0d"),Object(d["a"])(Ue,De,Ne,!1,null,null,null)),Fe=We.exports;g()(We,{VBtn:F["a"],VTextField:te["a"]});var Me=r["a"].extend({name:"Numpad",components:{SimpleKeyboard:Fe},model:{prop:"modelValue",event:"update:modelValue"},props:{modelValue:String,defaultValue:{default:"",type:String}}}),Ke=Me,He=(n("5eb6"),Object(d["a"])(Ke,Ee,Ae,!1,null,null,null)),Je=He.exports,Ge=n("bee2"),Ze=n("d4ec"),Xe=n("262e"),Ye=n("2caf"),qe=n("9072"),Qe=(n("a9e3"),n("99af"),function(e){var t=String(Math.abs(e%100));if("0"===t?t="00":Number(t)<10&&(t="0".concat(t)),e>-100&&e<0)return"€-0,".concat(t);var n="€".concat((e-e%100)/100,",").concat(t);return n.replace("€-","-€")}),et=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return e+t}),0)},tt=function(e){return"S_LID"!==e.status&&"S_GASTLID"!==e.status&&"S_NOVIET"!==e.status},nt=function(e){Object(Xe["a"])(n,e);var t=Object(Ye["a"])(n);function n(){return Object(Ze["a"])(this,n),t.apply(this,arguments)}return Object(Ge["a"])(n)}(Object(qe["a"])(Error)),rt=function(e,t){return Object.fromEntries(e.map((function(e){return[e[t],e]})))},at=function(e){return e},ot=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",e._l(e.producten,(function(t){return n("v-col",{key:t.id,attrs:{cols:"6",sm:"4",lg:"2"}},[n("v-card",{staticClass:"btn-product",on:{click:function(n){return e.$emit("selecteer",t)}}},[n("v-card-title",[e._v(e._s(t.beschrijving))]),n("v-card-subtitle",[e._v(e._s(e.formatBedrag(t.prijs)))])],1)],1)})),1)},it=[],st=r["a"].extend({name:"ProductWeergave",props:{producten:{type:Array,default:function(){return[]}}},methods:{formatBedrag:Qe}}),lt=st,ct=(n("c820"),n("62ad")),ut=n("0fd9"),dt=Object(d["a"])(lt,ot,it,!1,null,"6fe28908",null),pt=dt.exports;g()(dt,{VCard:q["a"],VCardSubtitle:Q["b"],VCardTitle:Q["d"],VCol:ct["a"],VRow:ut["a"]});var vt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-list",{attrs:{"two-line":""}},[n("v-list-item",[n("v-list-item-title",[e._v("Huidig saldo")]),n("v-list-item-subtitle",[e._v(e._s(e.formatBedrag(e.saldo)))])],1),n("v-list-item",[n("v-list-item-title",[e._v("Totaal bestelling")]),n("v-list-item-subtitle",[e._v(e._s(e.formatBedrag(e.totaal)))])],1),n("v-list-item",[n("v-list-item-title",[e._v("Nieuw saldo")]),n("v-list-item-subtitle",[e._v(e._s(e.formatBedrag(e.saldo-e.totaal)))])],1)],1),n("v-divider"),n("v-btn-toggle",[n("v-btn",{attrs:{block:"","x-large":"",color:"success",loading:e.bestellingLaden},on:{click:e.plaatsBestelling}},[n("v-icon",{attrs:{dark:""}},[e._v("mdi-check")])],1),n("v-btn",{attrs:{block:"",color:"error",disabled:e.bestellingLaden,"x-large":""},on:{click:e.annuleer}},[n("v-icon",{attrs:{dark:""}},[e._v("mdi-close")])],1)],1)],1)},mt=[],ft=r["a"].extend({name:"BestellingSamenvatting",props:{bestellingLaden:Boolean,totaal:Number,plaatsBestelling:Function,annuleer:Function,saldo:Number},methods:{formatBedrag:Qe}}),ht=ft,gt=n("a609"),bt=n("ce7e"),wt=Object(d["a"])(ht,vt,mt,!1,null,"5902486f",null),kt=wt.exports;g()(wt,{VBtn:F["a"],VBtnToggle:gt["a"],VDivider:bt["a"],VIcon:x["a"],VList:_["a"],VListItem:j["a"],VListItemSubtitle:V["b"],VListItemTitle:V["c"]});var xt=r["a"].extend({name:"Bestelling",components:{BestellingSamenvatting:kt,ProductWeergave:pt,Numpad:Je},props:{uid:String,bestellingId:{type:String,default:""}},data:function(){return{aantal:"",bestellingLaden:!1,forceBestelling:!1,notificatie:"",notificatieWeergeven:!1}},created:function(){if(this.$store.commit("setSelectie",this.uid),this.bestellingId){var e=this.$store.state.bestelling.bestellingen[this.bestellingId];this.$store.commit("setInvoer",e.inhoud),this.$store.commit("setOudeInvoer",e)}else this.$store.commit("setInvoer",{})},computed:{producten:function(){return this.$store.getters.zichtbareProducten},saldo:function(){var e=this.persoon.saldo;return this.oudeBestellingInhoud?e+et.apply(void 0,Object(ve["a"])(this.oudeBestellingInhoud.inhoud.map((function(e){return e.product.prijs*e.aantal})))):e},persoon:function(){return this.$store.state.persoon.personen[this.uid]},totaal:function(){var e=Object.values(this.bestellingInhoud);return et.apply(void 0,Object(ve["a"])(e.map((function(e){return e.product.prijs*e.aantal}))))},bestellingInhoud:function(){return this.$store.state.invoer.inhoud},oudeBestellingInhoud:function(){return this.$store.state.invoer.oudeBestelling}},methods:{formatBedrag:Qe,verwijderInvoer:function(e){this.$store.commit("verwijderInvoer",e)},selecteerInvoer:function(e){this.$store.commit("selecteerInvoer",{product:e,aantal:this.aantal}),this.aantal=""},bestel:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.bestellingLaden=!0,n.next=3,t.$store.dispatch("plaatsBestelling",{inhoud:t.bestellingInhoud,persoon:t.persoon,force:e});case 3:return t.bestellingLaden=!1,n.next=6,t.$router.replace("/personen");case 6:case"end":return n.stop()}}),n)})))()},plaatsBestelling:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.bestel(!1);case 3:t.next=20;break;case 5:if(t.prev=5,t.t0=t["catch"](0),!(t.t0 instanceof nt)){t.next=19;break}return t.prev=8,t.next=11,e.$notify.confirm({text:t.t0.message},{yesText:"Doorgaan",noText:"Terug"});case 11:return t.next=13,e.bestel(!0);case 13:t.next=17;break;case 15:t.prev=15,t.t1=t["catch"](8);case 17:t.next=20;break;case 19:e.$notify.show({text:t.t0.message});case 20:return t.prev=20,e.bestellingLaden=!1,t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[0,5,20,23],[8,15]])})))()},annuleer:function(){this.$store.commit("clearInvoer"),this.aantal="",this.$store.commit("setSelectie",null),this.$router.replace("/personen")}}}),_t=xt,jt=(n("2cd7"),Object(d["a"])(_t,Re,Le,!1,null,"0b492e97",null)),yt=jt.exports;g()(jt,{VAppBar:w["a"],VBtn:F["a"],VCard:q["a"],VCardText:Q["c"],VCardTitle:Q["d"],VCol:ct["a"],VIcon:x["a"],VRow:ut["a"],VSnackbar:M["a"],VSpacer:S["a"],VToolbarTitle:P["a"]});var Ot=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.loggedIn?n("v-container",{staticClass:"login-main"},[n("h1",[e._v("Welkom in het bar systeem! "+e._s(e.profielNaam))]),n("v-alert",{attrs:{prominent:"",type:"warning"}},[e._v("Deze versie van het barsyseem is in beta! Wees dus voorzichtig met waar je op klikt.")]),n("p",[n("v-btn",{attrs:{"x-large":"",to:"/personen"}},[e._v("Beginnen")])],1),e.isAdmin?n("div"):e._e()],1):n("v-container",{staticClass:"login-main"},[n("h1",[e._v("Barsysteem C.S.R.")]),n("p",[e._v(" Welkom "),e.vertrouwd?n("span",[e._v("terug")]):e._e(),e._v(" bij het barsysteem, gebruik je stek account om in te loggen. ")]),n("v-btn",{attrs:{"x-large":"",color:"primary"},on:{click:function(t){return e.$router.push("/auth/csr")}}},[e._v("Login")])],1)},Vt=[],Tt=r["a"].extend({name:"Login",data:function(){return{naam:""}},computed:{profielNaam:function(){var e,t;return null!==(e=null===(t=this.$store.state.user.profiel)||void 0===t?void 0:t.displayName)&&void 0!==e?e:""},vertrouwd:function(){return this.$store.state.user.locatieToken},isAdmin:function(){var e,t;return null!==(e=null===(t=this.$store.state.user.profiel)||void 0===t?void 0:t.scopes.includes("BAR:TRUST"))&&void 0!==e&&e},loggedIn:function(){return!!this.$store.state.user.tokenData}}}),Bt=Tt,$t=(n("21bb"),n("0798")),Ct=Object(d["a"])(Bt,Ot,Vt,!1,null,"9f24d302",null),St=Ct.exports;g()(Ct,{VAlert:$t["a"],VBtn:F["a"],VContainer:k["a"]});var Pt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-main",{staticClass:"logout-main"},[n("h1",[e._v("Weet je zeker dat je wil uitloggen?")]),n("v-btn-toggle",[n("v-btn",{attrs:{"x-large":"",color:"primary"},on:{click:e.logout}},[e._v("Uitloggen")]),n("v-btn",{attrs:{"x-large":""},on:{click:function(t){return e.$router.push("/")}}},[e._v("Terug")])],1)],1)],1)},It=[],Rt=r["a"].extend({name:"Logout",methods:{logout:function(){this.$router.push("/auth/logout")}}}),Lt=Rt,Et=(n("f75a"),Object(d["a"])(Lt,Pt,It,!1,null,"dde49842",null)),At=Et.exports;g()(Et,{VBtn:F["a"],VBtnToggle:gt["a"],VContainer:k["a"],VMain:T["a"]});var Dt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-main",[n("h1",[e._v("Uitloggen...")])])],1)},Nt=[],zt=r["a"].extend({name:"Logout",created:function(){this.$store.commit("setToken",null),this.$router.push("/")}}),Ut=zt,Wt=Object(d["a"])(Ut,Dt,Nt,!1,null,"fb83691c",null),Ft=Wt.exports;g()(Wt,{VContainer:k["a"],VMain:T["a"]});var Mt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Keyboard",{attrs:{placeholder:"Zoeken","grab-focus":!0},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),n("LedenTable",{attrs:{zoeken:e.value}})],1)},Kt=[],Ht=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("SimpleKeyboard",{attrs:{modelValue:e.modelValue,"keyboard-class":"full-keyboard",staggered:"",placeholder:e.placeholder,"grab-focus":e.grabFocus},on:{"update:modelValue":e.emitValue}})},Jt=[],Gt=r["a"].extend({name:"Keyboard",model:{prop:"modelValue",event:"update:modelValue"},components:{SimpleKeyboard:Fe},props:{modelValue:{type:String},placeholder:{default:"",type:String},grabFocus:{default:!1,type:Boolean}},methods:{emitValue:function(e){var t,n=e;n&&(n=null===(t=n)||void 0===t?void 0:t.toUpperCase());this.$emit("update:modelValue",n)}}}),Zt=Gt,Xt=(n("681b"),Object(d["a"])(Zt,Ht,Jt,!1,null,null,null)),Yt=Xt.exports,qt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-data-table",{attrs:{headers:e.headers,items:e.personen,"item-key":"uid","item-class":e.tableRowClassName,"items-per-page":-1,"hide-default-footer":""},on:{"click:row":e.rowClick},scopedSlots:e._u([{key:"item.saldo",fn:function(t){var n=t.item;return[e._v(" "+e._s(e.formatBedrag(n.saldo))+" ")]}}])})},Qt=[],en=(n("466d"),r["a"].extend({name:"LedenTable",props:{zoeken:String},computed:{personen:function(){return this.$store.getters.personenWeergave.filter(this.filterPersoon)},headers:function(){return[{text:"Bijnaam",value:"naam"},{text:"Naam",value:"weergave"},{text:"Saldo",value:"saldo"}]}},methods:{formatBedrag:Qe,rowClick:function(e){this.$router.push("/invoer/".concat(e.uid))},tableRowClassName:function(e){var t=e.saldo<0?"error":"success",n=this.$vuetify.theme.dark?"darken-4":"lighten-5";return"".concat(t," ").concat(n)},filterPersoon:function(e){return e.weergave.toUpperCase().match(this.zoeken)||e.naam.toUpperCase().match(this.zoeken)}}})),tn=en,nn=n("8fea"),rn=Object(d["a"])(tn,qt,Qt,!1,null,"191bebd4",null),an=rn.exports;g()(rn,{VDataTable:nn["a"]});var on=r["a"].extend({name:"Personen",components:{LedenTable:an,Keyboard:Yt},data:function(){return{value:""}},computed:{upperValue:function(){return this.value.toUpperCase()}},methods:{change:function(e){this.value=e}}}),sn=on,ln=(n("34c4"),Object(d["a"])(sn,Mt,Kt,!1,null,null,null)),cn=ln.exports,un=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",[n("v-col",{attrs:{cols:"3"}},[n("v-switch",{attrs:{label:"Alleen geselecteerde persoon"},model:{value:e.zoekInAlles,callback:function(t){e.zoekInAlles=t},expression:"zoekInAlles"}})],1),n("v-col",{attrs:{cols:"3"}},[n("v-menu",{ref:"datumMenu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,a=t.attrs;return[n("v-text-field",e._g(e._b({attrs:{label:"Datum","prepend-icon":"mdi-calendar",readonly:""},model:{value:e.datumText,callback:function(t){e.datumText=t},expression:"datumText"}},"v-text-field",a,!1),r))]}}]),model:{value:e.datumMenu,callback:function(t){e.datumMenu=t},expression:"datumMenu"}},[n("v-date-picker",{attrs:{range:"",min:"1950-01-01"},model:{value:e.datum,callback:function(t){e.datum=t},expression:"datum"}})],1)],1),n("v-col",{attrs:{cols:"3"}},[n("v-dialog",{scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,a=t.attrs;return[n("v-btn",e._g(e._b({attrs:{title:"Filter op specifieke producten",type:e.isIndeterminate?"primary":"default"}},"v-btn",a,!1),r),[n("v-icon",[e._v("mdi-tune")]),e._v(" Producten ")],1)]}}]),model:{value:e.productSelectieZichtbaar,callback:function(t){e.productSelectieZichtbaar=t},expression:"productSelectieZichtbaar"}},[n("v-card",[n("v-card-title",[e._v("Selecteer producten")]),n("v-card-text",[n("v-checkbox",{attrs:{indeterminate:e.isIndeterminate,label:"Alle"},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("Alle ")]),n("v-divider"),n("v-row",e._l(e.producten,(function(t){return n("v-col",{key:t.id,attrs:{cols:"3"}},[n("v-checkbox",{attrs:{value:t.id,label:t.beschrijving},model:{value:e.selectedProducten,callback:function(t){e.selectedProducten=t},expression:"selectedProducten"}})],1)})),1)],1)],1)],1)],1),n("v-col",{attrs:{cols:"3"}},[n("v-btn",{attrs:{size:"medium"},on:{click:e.zoeken}},[e._v("Zoeken")])],1),n("v-col",[n("v-data-table",{attrs:{items:e.bestellingen,headers:e.headers,"sort-by":"moment","sort-desc":""},scopedSlots:e._u([{key:"item.uid",fn:function(t){var n=t.item;return[e._v(" "+e._s(e.naamFormatter(n))+" ")]}},{key:"item.inhoud",fn:function(t){var r=t.item;return[n("ul",e._l(r.inhoud,(function(t){return n("li",{key:t.id},[e._v(" "+e._s(t.aantal)+" "+e._s(t.product.beschrijving)+" ")])})),0)]}},{key:"item.totaal",fn:function(t){var n=t.item;return[e._v(" "+e._s(e.formatBedrag(n.totaal))+" ")]}},{key:"item.moment",fn:function(t){var n=t.item;return[e._v(" "+e._s(new Date(n.moment).toLocaleString("nl"))+" ")]}},{key:"item.opties",fn:function(t){var r=t.item;return[r.deleted?e._e():n("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.handleEdit(r)}}},[e._v(" mdi-pencil ")]),r.deleted?e._e():n("v-icon",{attrs:{small:""},on:{click:function(t){return e.handleVerwijder(r)}}},[e._v(" mdi-delete ")]),r.deleted?n("v-icon",{attrs:{small:""},on:{click:function(t){return e.handleHerstel(r)}}},[e._v("mdi-restore")]):e._e()]}}])})],1)],1)},dn=[],pn=n("3835"),vn=(n("a15b"),n("4fadc"),r["a"].extend({name:"Bestellingen",computed:{bestellingen:function(){return Object.values(this.$store.state.bestelling.bestellingen)},producten:function(){return Object.values(this.$store.state.product.producten).filter((function(e){return!e.beheer&&1===e.status}))},headers:function(){return[{text:"Naam",value:"uid"},{text:"Datum en tijd",value:"moment"},{text:"Totaal",value:"totaal"},{text:"Bestelling",value:"inhoud"},{text:"Opties",value:"opties",sortable:!1}]},isIndeterminate:function(){return this.selectedProducten.length>0&&this.selectedProducten.length<this.producten.length},datumText:function(){return this.datum.join(" ~ ")}},data:function(){return{verwijderLaden:{},herstelLaden:{},productSelectieZichtbaar:!1,zoekInAlles:!0,datum:[new Date(+new Date-1296e6).toISOString().substr(0,10),(new Date).toISOString().substr(0,10)],datumMenu:!1,selectedProducten:[],checkAll:!1,shortcuts:[{text:"Afgelopen week",value:function(){var e=new Date,t=new Date;return t.setTime(t.getTime()-6048e5),[t,e]}()},{text:"Laatste 2 weken",value:function(){var e=new Date,t=new Date;return t.setTime(t.getTime()-1296e6),[t,e]}()},{text:"Afgelopen maand",value:function(){var e=new Date,t=new Date;return t.setTime(t.getTime()-2592e6),[t,e]}()},{text:"Laatste 3 maanden",value:function(){var e=new Date,t=new Date;return t.setTime(t.getTime()-7776e6),[t,e]}()}]}},methods:{naamFormatter:function(e){var t;return null===(t=this.getPersoon(e.uid))||void 0===t?void 0:t.weergave},getPersoon:function(e){return this.$store.state.persoon.personen[e]},getProduct:function(e){return this.$store.state.product.producten[e]},getBestelLijstString:function(e){var t=this;return Object.entries(e).map((function(e){var n,r=Object(pn["a"])(e,2),a=r[0],o=r[1];return"".concat(o," ").concat(null===(n=t.getProduct(a))||void 0===n?void 0:n.beschrijving)}))},formatBedrag:Qe,handleCheckedProductenChange:function(e){this.checkAll=e.length===this.producten.length},handleCheckAllChange:function(e){this.selectedProducten=e?this.producten.map((function(e){return e.id})):[]},handleEdit:function(e){this.$router.push("/invoer/".concat(e.uid,"/bewerken/").concat(e.id))},handleVerwijder:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.verwijderLaden[e.id]=!0,n.prev=1,n.next=4,t.$store.dispatch("verwijderBestelling",e);case 4:n.next=8;break;case 6:n.prev=6,n.t0=n["catch"](1);case 8:delete t.verwijderLaden[e.id];case 9:case"end":return n.stop()}}),n,null,[[1,6]])})))()},handleHerstel:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.herstelLaden[e.id]=!0,n.prev=1,n.next=4,t.$store.dispatch("herstelBestelling",e);case 4:n.next=8;break;case 6:n.prev=6,n.t0=n["catch"](1);case 8:delete t.verwijderLaden[e.id];case 9:case"end":return n.stop()}}),n,null,[[1,6]])})))()},zoeken:function(){this.$store.dispatch("fetchBestellingen",{aantal:this.zoekInAlles?"alles":this.$store.state.user.selectie,begin:this.datum[0],eind:this.datum[1],productType:this.selectedProducten})}},created:function(){var e=this;setTimeout((function(){e.$store.dispatch("fetchBestellingen",{aantal:"alles",begin:"",eind:"",productType:[]})}),1e3)}})),mn=vn,fn=(n("e06c"),n("ac7c")),hn=n("2e4b"),gn=n("e449"),bn=n("b73d"),wn=Object(d["a"])(mn,un,dn,!1,null,null,null),kn=wn.exports;g()(wn,{VBtn:F["a"],VCard:q["a"],VCardText:Q["c"],VCardTitle:Q["d"],VCheckbox:fn["a"],VCol:ct["a"],VDataTable:nn["a"],VDatePicker:hn["a"],VDialog:ee["a"],VDivider:bt["a"],VIcon:x["a"],VMenu:gn["a"],VRow:ut["a"],VSwitch:bn["a"],VTextField:te["a"]});var xn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",[n("v-col",{attrs:{lg:"4"}},[e.isBeheer?n("beheer-bijnaam"):e._e()],1),n("v-col",{attrs:{lg:"4"}},[e.isAdmin?n("beheer-vertrouw"):e._e()],1)],1)},_n=[],jn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[n("v-card-title",[e._v("Bijnaam aanpassen")]),n("v-card-text",[n("v-autocomplete",{attrs:{label:"Naam",items:e.personen,"item-text":"weergave","item-value":"uid",clearable:""},on:{change:e.selecteerPersoon}}),n("v-text-field",{attrs:{label:"Bijnaam"},model:{value:e.bijnaam,callback:function(t){e.bijnaam=t},expression:"bijnaam"}}),n("v-btn",{attrs:{block:"",loading:e.laden,disabled:null==e.persoon},on:{click:e.opslaan}},[e._v("Opslaan")])],1)],1)},yn=[],On=r["a"].extend({data:function(){return{persoon:null,bijnaam:"",laden:!1}},computed:{personen:function(){return this.$store.getters.personenWeergave}},methods:{selecteerPersoon:function(e){var t,n;e?(this.persoon=this.$store.state.persoon.personen[e],this.bijnaam=null!==(t=null===(n=this.persoon)||void 0===n?void 0:n.naam)&&void 0!==t?t:""):(this.persoon=null,this.bijnaam="")},opslaan:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.persoon){t.next=2;break}throw new Error("Persoon niet geselecteerd");case 2:return e.laden=!0,t.next=5,e.$store.dispatch("updateBijnaam",{id:e.persoon.uid,name:e.bijnaam});case 5:e.laden=!1;case 6:case"end":return t.stop()}}),t)})))()}}}),Vn=On,Tn=n("c6a6"),Bn=Object(d["a"])(Vn,jn,yn,!1,null,"4aed857a",null),$n=Bn.exports;g()(Bn,{VAutocomplete:Tn["a"],VBtn:F["a"],VCard:q["a"],VCardText:Q["c"],VCardTitle:Q["d"],VTextField:te["a"]});var Cn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[n("v-card-title",[e._v("Locatie vertrouwen")]),n("v-card-text",[e.vertrouwd?n("div",[n("p",[e._v("Deze locatie is vertrouwd: "+e._s(e.vertrouwd.naam))]),n("v-btn",{attrs:{color:"primary"},on:{click:e.stopVertrouwen}},[e._v(" Niet langer vertrouwen ")])],1):n("div",[n("p",[e._v(" Door een locatie te vertrouwen wordt het mogelijk voor alle leden om in te loggen in het bar systeem. Gebruik deze functie alleen op vertrouwde plekken. ")]),n("p",[n("v-text-field",{attrs:{label:"Naam van deze locatie"},model:{value:e.naam,callback:function(t){e.naam=t},expression:"naam"}}),n("v-btn",{attrs:{block:"",color:"primary",loading:e.laden},on:{click:e.vertrouw}},[e._v(" Vertrouw deze locatie ")])],1)])])],1)},Sn=[],Pn=r["a"].extend({data:function(){return{naam:"",laden:!1}},computed:{vertrouwd:function(){return this.$store.state.user.locatieToken}},methods:{vertrouw:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.laden=!0,t.next=3,e.$store.dispatch("vertrouwLocatie",e.naam);case 3:e.laden=!1;case 4:case"end":return t.stop()}}),t)})))()},stopVertrouwen:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$store.commit("setLocatieToken",null);case 1:case"end":return t.stop()}}),t)})))()}}}),In=Pn,Rn=Object(d["a"])(In,Cn,Sn,!1,null,null,null),Ln=Rn.exports;g()(Rn,{VBtn:F["a"],VCard:q["a"],VCardText:Q["c"],VCardTitle:Q["d"],VTextField:te["a"]});var En=r["a"].extend({components:{BeheerBijnaam:$n,BeheerVertrouw:Ln},computed:{scopes:function(){var e,t;return null!==(e=null===(t=this.$store.state.user.profiel)||void 0===t?void 0:t.scopes)&&void 0!==e?e:[]},isBeheer:function(){return this.scopes.includes("BAR:BEHEER")},isAdmin:function(){return this.scopes.includes("BAR:TRUST")}}}),An=En,Dn=Object(d["a"])(An,xn,_n,!1,null,"5262dfaf",null),Nn=Dn.exports;g()(Dn,{VCol:ct["a"],VRow:ut["a"]});var zn=n("852e"),Un=n.n(zn),Wn={sameSite:"strict"},Fn=function(e){Un.a.set("token",JSON.stringify(e),Wn)},Mn=function(){return Un.a.remove("token",Wn)},Kn=function(){var e=Un.a.get("token");return e?JSON.parse(e):null},Hn=function(){var e=Kn();return e?new ke["Token"](je,e):null},Jn=function(e){return null==e?null:new ke["Token"](je,e)},Gn={sameSite:"strict",expires:new Date(+new Date+864e8)},Zn=function(e){Un.a.set("locatie-token",JSON.stringify(e),Gn)},Xn=function(){Un.a.remove("locatie-token",Gn)},Yn=function(){var e=Un.a.get("locatie-token");return e?JSON.parse(e):null};r["a"].use(ge["a"]);var qn=[{path:"/",name:"Home",component:St},{path:"/personen",name:"Persoonselectie",component:cn},{path:"/invoer/:uid",name:"Invoer",component:yt,props:!0},{path:"/invoer/:uid/bewerken/:bestellingId",name:"Invoer bewerken",component:yt,props:!0},{path:"/bestellingen",name:"Bestellingen",component:kn},{path:"/auth/csr",name:"Authorize",component:Te},{path:"/auth/callback",name:"AuthCallback",component:Ie},{path:"/logout",name:"Logout",component:At},{path:"/auth/logout",name:"AuthLogout",component:Ft},{path:"/beheer",name:"Beheer",component:Nn}],Qn=new ge["a"]({mode:"history",routes:qn});Qn.beforeEach((function(e,t,n){if("/"!==e.path&&!e.path.startsWith("/auth")){var r=Hn();if(!r)return void n({path:"/"})}n()}));var er=Qn,tr=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=Hn(),n){e.next=5;break}return e.next=4,er.push("/auth/logout");case 4:throw new Error("Geen token");case 5:return e.prev=5,e.next=8,he()(n.sign(Object(A["a"])(Object(A["a"])({},t),{},{headers:Object(A["a"])(Object(A["a"])({},t.headers),{},{"Content-Type":"application/json","X-Bar-Token":null===(r=Yn())||void 0===r?void 0:r.sleutel}),url:"https://csrdelft.nl"+t.url})));case 8:return a=e.sent,e.abrupt("return",a.data);case 12:if(e.prev=12,e.t0=e["catch"](5),!e.t0.response||401!==e.t0.response.status){e.next=18;break}return e.next=17,er.push("/auth/logout");case 17:throw new Error("Niet ingelogd!");case 18:throw new Error(e.t0.message);case 19:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t){return e.apply(this,arguments)}}(),nr=at({state:function(){return{bestellingen:{}}},mutations:{setBestellingen:function(e,t){e.bestellingen=rt(t,"id")},updateBestelling:function(e,t){e.bestellingen[t.id]=t}},actions:{fetchBestellingen:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.state,n.t0=rt,n.next=4,tr({url:"/api/v3/bar/laadLaatste",method:"POST",data:JSON.stringify(t)});case 4:n.t1=n.sent,r.bestellingen=(0,n.t0)(n.t1,"id");case 6:case"end":return n.stop()}}),n)})))()},verwijderBestelling:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,n.next=3,tr({url:"/api/v3/bar/verwijderBestelling",method:"POST",data:{verwijderBestelling:t.id}});case 3:if(a=n.sent,a){n.next=6;break}throw new Error("Verwijderen van bestelling mislukt");case 6:r("updateBestelling",Object(A["a"])(Object(A["a"])({},t),{},{deleted:"1"}));case 7:case"end":return n.stop()}}),n)})))()},herstelBestelling:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,n.next=3,tr({url:"/api/v3/bar/undoVerwijderBestelling",method:"POST",data:{undoVerwijderBestelling:t.id}});case 3:if(a=n.sent,a){n.next=6;break}throw new Error("Herstellen van bestelling mislukt");case 6:r("updateBestelling",Object(A["a"])(Object(A["a"])({},t),{},{deleted:"0"}));case 7:case"end":return n.stop()}}),n)})))()}},getters:{}}),rr=at({state:function(){return{inhoud:{},oudeBestelling:null}},mutations:{setInvoer:function(e,t){e.inhoud=Object.fromEntries(Object.values(t).map((function(e){return[e.product.id,e]})))},setOudeInvoer:function(e,t){e.oudeBestelling=t},selecteerInvoer:function(e,t){var n=t.product,a=t.aantal;n.id in e.inhoud||r["a"].set(e.inhoud,n.id,{product:n,aantal:0}),r["a"].set(e.inhoud,n.id,Object(A["a"])(Object(A["a"])({},e.inhoud[n.id]),{},{aantal:e.inhoud[n.id].aantal+(Number(a)||1)})),0===e.inhoud[n.id].aantal&&r["a"].delete(e.inhoud,n.id)},verwijderInvoer:function(e,t){r["a"].delete(e.inhoud,t)},clearInvoer:function(e){e.inhoud={},e.oudeBestelling=null}},actions:{},getters:{}}),ar=at({state:function(){return{profiel:null,tokenData:null,selectie:null,locatieToken:null}},getters:{token:function(e){return Jn(e.tokenData)}},mutations:{setToken:function(e,t){e.tokenData=t},setLocatieToken:function(e,t){e.locatieToken=t},setProfiel:function(e,t){e.profiel=t},setSelectie:function(e,t){e.selectie=t}},actions:{fetchProfiel:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,tr({url:"/api/v3/profiel",method:"GET"});case 3:r=t.sent,n("setProfiel",r);case 5:case"end":return t.stop()}}),t)})))()}}}),or=(n("b0c0"),at({state:function(){return{personen:{}}},mutations:{setPersonen:function(e,t){e.personen=t},setPersoon:function(e,t){r["a"].set(e.personen,t.uid,t)}},getters:{},actions:{listUsers:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,tr({url:"/api/v3/bar/personen",method:"POST"});case 3:r=t.sent,a=Object.values(r),o=Object.fromEntries(a.map((function(e,t){return[e.uid,Object(A["a"])({},e)]}))),n("setPersonen",o);case 7:case"end":return t.stop()}}),t)})))()},updateBijnaam:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,a=e.state,o=t.id,i=t.name,n.next=4,tr({url:"/api/v3/bar/updatePerson",method:"POST",data:{id:o,name:i}});case 4:r("setPersoon",Object(A["a"])(Object(A["a"])({},a.personen[o]),{},{naam:i}));case 5:case"end":return n.stop()}}),n)})))()}}})),ir=at({state:function(){return{producten:{}}},mutations:{setProducten:function(e,t){e.producten=t}},getters:{},actions:{}}),sr=function(e,t){return function(n){var r=Kn();r&&n.commit(e,r);var a=Yn();a&&n.commit(t,a),n.subscribe((function(n){n.type===e&&(n.payload?Fn(n.payload):Mn()),n.type===t&&(n.payload?Zn(n.payload):Xn())}))}};r["a"].use(me["a"]);var lr=new me["a"].Store({devtools:!0,plugins:[sr("setToken","setLocatieToken")],getters:{personenWeergave:function(e){return Object.values(e.persoon.personen).filter((function(e){return!e.deleted})).sort((function(e,t){return e.recent-t.recent})).reverse()},zichtbareProducten:function(e){return Object.values(e.product.producten).filter((function(e){return!e.beheer&&1===e.status}))},isAdmin:function(e){var t,n;return null!==(t=null===(n=e.user.profiel)||void 0===n?void 0:n.scopes.includes("BAR:TRUST"))&&void 0!==t&&t},isBeheer:function(e){var t,n;return null!==(t=null===(n=e.user.profiel)||void 0===n?void 0:n.scopes.includes("BAR:BEHEER"))&&void 0!==t&&t},huidigePersoon:function(e){return e.user.selectie?e.persoon.personen[e.user.selectie]:null}},mutations:{},actions:{listProducten:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,tr({url:"/api/v3/bar/producten",method:"POST"});case 3:r=t.sent,a=Object.values(r),o=Object.fromEntries(a.map((function(e){return[e.id,e]}))),n("setProducten",o);case 7:case"end":return t.stop()}}),t)})))()},postLogin:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.dispatch,t.next=3,n("fetchProfiel");case 3:return t.next=5,n("listUsers");case 5:return t.next=7,n("listProducten");case 7:case"end":return t.stop()}}),t)})))()},vertrouwLocatie:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,n.next=3,tr({url:"/api/v3/bar/trust",method:"POST",data:JSON.stringify({naam:t})});case 3:a=n.sent,r("setLocatieToken",a);case 5:case"end":return n.stop()}}),n)})))()},plaatsBestelling:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i,s,l,c,u,d,p,v,m,f;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.commit,a=e.state,o=e.getters,i=t.force,s=void 0!==i&&i,l=o.huidigePersoon,l){n.next=5;break}throw new Error("Geen persoon geselecteerd");case 5:if(c=0===Object.values(a.invoer.inhoud).length,!c){n.next=8;break}throw new Error("Geen bestelling ingevoerd");case 8:if(u=a.invoer.oudeBestelling,d=tt(l),p=et.apply(void 0,Object(ve["a"])(Object.values(a.invoer.inhoud).map((function(e){return e.aantal*e.product.prijs})))),u?(m=u.totaal,v=l.saldo+m-p):v=l.saldo-p,f=v<0,(p<=0||"S_NOBODY"===l.status||o.isBeheer)&&(f=!1),!d||!f){n.next=18;break}throw new Error("Oudleden kunnen niet rood staan, inleg vereist!");case 18:if(s||!f){n.next=22;break}throw new nt("Laat lid inleggen. Saldo wordt negatief.");case 22:return n.next=24,tr({url:"/api/v3/bar/bestelling",method:"POST",data:Object(A["a"])({uid:l.uid,inhoud:Object.fromEntries(Object.values(a.invoer.inhoud).map((function(e){return[e.product.id,e.aantal]})))},u?{oudeBestelling:u.id}:{})});case 24:r("setPersoon",Object(A["a"])(Object(A["a"])({},l),{},{recent:l.recent+1,saldo:v})),r("clearInvoer");case 26:case"end":return n.stop()}}),n)})))()}},modules:{bestelling:nr,invoer:rr,user:ar,persoon:or,product:ir}});r["a"].config.productionTip=!1,new r["a"]({vuetify:pe,store:lr,router:er,render:function(e){return e(R)}}).$mount("#app")},dad7:function(e,t,n){},dfa6:function(e,t,n){},e06c:function(e,t,n){"use strict";n("e1c8")},e1c8:function(e,t,n){},f75a:function(e,t,n){"use strict";n("01f3")}});
//# sourceMappingURL=app.a71e3633.js.map