(function(e){function t(t){for(var r,i,s=t[0],l=t[1],c=t[2],d=0,p=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&p.push(a[i][0]),a[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);u&&u(t);while(p.length)p.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,s=1;s<n.length;s++){var l=n[s];0!==a[l]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={app:0},o=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},1:function(e,t){},"1c0d":function(e,t,n){"use strict";n("dfa6")},"243c":function(e,t,n){},"34c4":function(e,t,n){"use strict";n("a547")},4169:function(e,t,n){"use strict";n("9785")},6217:function(e,t,n){"use strict";n("bb36")},"681b":function(e,t,n){"use strict";n("dad7")},9785:function(e,t,n){},a547:function(e,t,n){},b9b1:function(e,t,n){},bb36:function(e,t,n){},bc50:function(e,t,n){"use strict";n("b9b1")},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("v-navigation-drawer",{attrs:{app:"",temporary:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[n("v-list",{attrs:{nav:"",dense:""}},[n("v-list-item-group",{attrs:{act:""}},[n("v-list-item",{attrs:{to:"/personen"}},[n("v-list-item-icon",[n("v-icon",[e._v("mdi-home")])],1),n("v-list-item-title",[e._v("Personen")])],1),n("v-list-item",{attrs:{disabled:null==e.bestellingUrl,to:e.bestellingUrl}},[n("v-list-item-icon",[n("v-icon",[e._v("mdi-receipt")])],1),n("v-list-item-title",[e._v("Invoer")])],1),n("v-list-item",{attrs:{to:"/bestellingen"}},[n("v-list-item-icon",[n("v-icon",[e._v("mdi-view-list")])],1),n("v-list-item-title",[e._v("Bestellingen")])],1),n("v-list-item",{attrs:{to:"/logout"}},[n("v-list-item-icon",[n("v-icon",[e._v("mdi-account")])],1),n("v-list-item-title",[e._v("Uitloggen")])],1)],1)],1)],1),n("v-app-bar",{attrs:{app:""}},[e.loggedIn?n("v-app-bar-nav-icon",{on:{click:function(t){e.drawer=!e.drawer}}}):e._e(),n("v-toolbar-title",[e._v("C.S.R. Bar "),e.vertrouwd?n("span",[e._v("- "+e._s(e.vertrouwd.naam))]):e._e()]),n("v-spacer"),n("clock")],1),n("v-main",[n("v-container",{attrs:{fluid:""}},[n("router-view")],1)],1),n("v-footer",{attrs:{app:""}}),n("v-overlay",{attrs:{value:e.loading}},[n("v-progress-circular",{attrs:{indeterminate:"",size:"64"}})],1)],1)},o=[],i=n("1da1"),s=(n("96cf"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[e._v(e._s(e.tijd))])}),l=[],c=r["a"].extend({name:"Clock",data:function(){return{date:new Date}},created:function(){var e=this;setInterval((function(){e.date=new Date}),1e3)},computed:{tijd:function(){return this.date.toLocaleTimeString("nl-NL")}}}),u=c,d=n("2877"),p=Object(d["a"])(u,s,l,!1,null,"20371285",null),v=p.exports,f=r["a"].extend({components:{Clock:v},name:"App",data:function(){return{loading:!0,drawer:!1}},computed:{loggedIn:function(){return Boolean(this.$store.getters.token)},bestellingUrl:function(){var e=this.$store.state.user.selectie;return e?"/invoer/".concat(e):null},vertrouwd:function(){return this.$store.state.user.locatieToken}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.loggedIn){t.next=9;break}return t.prev=1,t.next=4,e.$store.dispatch("postLogin");case 4:return t.prev=4,e.loading=!1,t.finish(4);case 7:t.next=10;break;case 9:e.loading=!1;case 10:case"end":return t.stop()}}),t,null,[[1,,4,7]])})))()}}),m=f,h=n("6544"),b=n.n(h),g=n("7496"),k=n("40dc"),w=n("5bc1"),x=n("a523"),_=n("553a"),j=n("132d"),y=n("8860"),O=n("da13"),V=n("1baa"),I=n("34c3"),T=n("5d23"),S=n("f6c4"),$=n("f774"),C=n("a797"),B=n("490a"),L=n("2fa4"),P=n("2a7f"),R=Object(d["a"])(m,a,o,!1,null,null,null),E=R.exports;b()(R,{VApp:g["a"],VAppBar:k["a"],VAppBarNavIcon:w["a"],VContainer:x["a"],VFooter:_["a"],VIcon:j["a"],VList:y["a"],VListItem:O["a"],VListItemGroup:V["a"],VListItemIcon:I["a"],VListItemTitle:T["c"],VMain:S["a"],VNavigationDrawer:$["a"],VOverlay:C["a"],VProgressCircular:B["a"],VSpacer:L["a"],VToolbarTitle:P["a"]});var A=n("f309");r["a"].use(A["a"]);var N=new A["a"]({theme:{dark:!0}}),D=(n("4de4"),n("07ac"),n("4e827"),n("c1f9"),n("d81d"),n("2f62")),z=n("5530"),U=n("bc3a"),M=n.n(U),W=(n("2ca0"),n("8c4f")),J=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-overlay",{attrs:{value:!0}},[n("div",{staticClass:"d-flex flex-column align-center"},[n("v-progress-circular",{attrs:{indeterminate:"",size:"64"}}),n("span",{staticClass:"pt-2"},[e._v(e._s(e.msg))])],1)])},K=[],F=n("a981"),G=n.n(F),H=new G.a({clientId:"bar",authorizationUri:"".concat("https://csrdelft.nl","/authorize"),accessTokenUri:"".concat("https://csrdelft.nl","/api/v3/token"),redirectUri:"".concat(window.location.origin,"/auth/callback"),scopes:["BAR:NORMAAL","BAR:BEHEER","BAR:TRUST"]}),Z=H,X=r["a"].extend({name:"Authorize",data:function(){return{msg:"Wachten op autorisatie",loading:!1}},methods:{setLoading:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.loading=!1,t.msg=e,n.next=4,t.$nextTick();case 4:t.loading=!0;case 5:case"end":return n.stop()}}),n)})))()}},created:function(){var e=this;this.$store.state.user.tokenData?this.$router.push("/auth/post-login"):(window.open(Z.token.getUri()),this.loading=!0,window.oauth2Callback=function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.setLoading("Token laden...");case 2:return t.prev=2,t.next=5,Z.token.getToken(n);case 5:return r=t.sent,t.next=8,e.$store.commit("setToken",r.data);case 8:t.next=12;break;case 10:t.prev=10,t.t0=t["catch"](2);case 12:return t.next=14,e.setLoading("Profiel laden...");case 14:return t.next=16,e.$store.dispatch("postLogin");case 16:return e.loading=!1,t.next=19,e.$router.push("/auth/post-login");case 19:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}())}}),Y=X,Q=Object(d["a"])(Y,J,K,!1,null,"4a8358a7",null),q=Q.exports;b()(Q,{VOverlay:C["a"],VProgressCircular:B["a"]});var ee=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v("Redirecting back")])},te=[],ne=r["a"].extend({name:"AuthCallback",created:function(){window.opener&&window.opener.oauth2Callback(window.location.href),window.close()}}),re=ne,ae=Object(d["a"])(re,ee,te,!1,null,"aea0d49a",null),oe=ae.exports,ie=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.persoon?n("div",[n("v-app-bar",{attrs:{flat:"",color:e.persoon.saldo>0?"success":"error"}},[n("v-toolbar-title",[e._v(e._s(e.persoon.naam))])],1),n("v-row",[n("v-col",{attrs:{cols:"8"}},[n("v-row",{staticClass:"bestelling-inhoud"},e._l(e.bestellingInhoud,(function(t){return n("v-col",{key:t.product.productId+" "+t.aantal,attrs:{cols:"3"}},[n("v-card",{staticClass:"product",on:{click:function(n){return e.verwijderInvoer(t.product.productId)}}},[n("v-card-title",{staticClass:"product-title"},[e._v(" "+e._s(t.product.beschrijving)+" "),n("v-spacer"),n("v-btn",{attrs:{icon:""}},[n("v-icon",[e._v("mdi-close")])],1)],1),n("v-card-text",{staticClass:"text-h5"},[e._v(e._s(t.aantal))])],1)],1)})),1),n("ProductWeergave",{attrs:{producten:e.producten},on:{selecteer:e.selecteerInvoer}})],1),n("v-col",{attrs:{cols:"4"}},[n("Numpad",{attrs:{"default-value":"1"},model:{value:e.aantal,callback:function(t){e.aantal=t},expression:"aantal"}}),n("BestellingSamenvatting",{attrs:{"bestelling-laden":e.bestellingLaden,persoon:e.persoon,totaal:e.totaal,annuleer:e.annuleer,plaatsBestelling:e.plaatsBestelling}})],1)],1)],1):e._e()},se=[],le=n("2909"),ce=n("3835"),ue=(n("4fad"),n("a9e3"),n("ac1f"),n("5319"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("SimpleKeyboard",{attrs:{layout:["7 8 9","4 5 6","1 2 3","{bksp} 0 {neg}"],display:{"{bksp}":"<","{neg}":"-"},modelValue:e.modelValue,defaultValue:e.defaultValue},on:{"update:modelValue":function(t){return e.$emit("update:modelValue",t)}}})}),de=[],pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"simple-keyboard-input"},[n("v-text-field",{attrs:{autofocus:!0,value:e.modelValue,placeholder:e.defaultValue},on:{input:e.onChange}})],1),n("div",{class:e.keyboardClass+" hg-theme-default"})])},ve=[],fe=(n("fb6a"),n("dd7f")),me=n.n(fe),he=r["a"].extend({name:"SimpleKeyboard",model:{prop:"modelValue",event:"update:modelValue"},props:{layout:{default:function(){return["Q W E R T Y U I O P {bksp}","A S D F G H J K L {leeg}","Z X C V B N M {space}"]},type:Array},display:{default:function(){return{"{leeg}":"Leeg","{space}":"Spatie","{bksp}":"Delete"}},type:Object},keyboardClass:{default:"simple-keyboard",type:String},modelValue:{type:String},defaultValue:{default:"",type:String}},data:function(){return{keyboard:null}},mounted:function(){this.keyboard=new me.a(this.keyboardClass,{onChange:this.onChange,onKeyPress:this.onKeyPress,display:this.display,layout:{default:this.layout}})},methods:{onChange:function(e){this.$emit("update:modelValue",e)},onKeyPress:function(e){this.$emit("keypress",e),"{shift}"!==e&&"{lock}"!==e||this.handleShift(),"{leeg}"===e&&this.handleLeeg(),"{neg}"===e&&this.handleNeg()},handleNeg:function(){this.modelValue&&this.modelValue.startsWith("-")?this.onChange(this.modelValue.slice(1)):""===this.modelValue?this.onChange("-1"):this.onChange("-".concat(this.modelValue))},handleLeeg:function(){this.keyboard&&this.keyboard.setInput("")},handleShift:function(){var e,t=null===(e=this.keyboard)||void 0===e?void 0:e.options.layoutName,n="default"===t?"shift":"default";this.keyboard&&this.keyboard.setOptions({layoutName:n})}},watch:{modelValue:function(e){this.keyboard&&this.keyboard.setInput(e)}}}),be=he,ge=(n("1c0d"),n("8654")),ke=Object(d["a"])(be,pe,ve,!1,null,null,null),we=ke.exports;b()(ke,{VTextField:ge["a"]});var xe=r["a"].extend({name:"Numpad",components:{SimpleKeyboard:we},model:{prop:"modelValue",event:"update:modelValue"},props:{modelValue:String,defaultValue:{default:"",type:String}}}),_e=xe,je=Object(d["a"])(_e,ue,de,!1,null,"3229dfbe",null),ye=je.exports,Oe=n("d4ec"),Ve=n("262e"),Ie=n("2caf"),Te=n("9072"),Se=(n("99af"),function(e){var t=String(Math.abs(e%100));if("0"===t?t="00":Number(t)<10&&(t="0".concat(t)),e>-100&&e<0)return"€-0,".concat(t);var n="€".concat((e-e%100)/100,",").concat(t);return n.replace("€-","-€")}),$e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return e+t}),0)},Ce=function(e){return"S_LID"!==e.status&&"S_GASTLID"!==e.status&&"S_NOVIET"!==e.status},Be=function(e){Object(Ve["a"])(n,e);var t=Object(Ie["a"])(n);function n(){return Object(Oe["a"])(this,n),t.apply(this,arguments)}return n}(Object(Te["a"])(Error)),Le=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",e._l(e.producten,(function(t){return n("v-col",{key:t.productId,attrs:{cols:"2"}},[n("v-card",{staticClass:"btn-product",on:{click:function(n){return e.$emit("selecteer",t)}}},[n("v-card-title",[e._v(e._s(t.beschrijving))]),n("v-card-subtitle",[e._v(e._s(e.formatBedrag(t.prijs)))])],1)],1)})),1)},Pe=[],Re=r["a"].extend({name:"ProductWeergave",props:{producten:{type:Array,default:function(){return[]}}},methods:{formatBedrag:Se}}),Ee=Re,Ae=(n("4169"),n("b0af")),Ne=n("99d9"),De=n("62ad"),ze=n("0fd9"),Ue=Object(d["a"])(Ee,Le,Pe,!1,null,"5febcf68",null),Me=Ue.exports;b()(Ue,{VCard:Ae["a"],VCardSubtitle:Ne["a"],VCardTitle:Ne["c"],VCol:De["a"],VRow:ze["a"]});var We=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-list",{attrs:{"two-line":""}},[n("v-list-item",[n("v-list-item-title",[e._v("Huidig saldo")]),n("v-list-item-subtitle",[e._v(e._s(e.formatBedrag(e.persoon.saldo)))])],1),n("v-list-item",[n("v-list-item-title",[e._v("Totaal bestelling")]),n("v-list-item-subtitle",[e._v(e._s(e.formatBedrag(e.totaal)))])],1),n("v-list-item",[n("v-list-item-title",[e._v("Nieuw saldo")]),n("v-list-item-subtitle",[e._v(e._s(e.formatBedrag(e.persoon.saldo-e.totaal)))])],1)],1),n("v-divider"),n("v-btn-toggle",[n("v-btn",{attrs:{color:"success",loading:e.bestellingLaden},on:{click:e.plaatsBestelling}},[n("v-icon",{attrs:{dark:""}},[e._v("mdi-check")])],1),n("v-btn",{attrs:{color:"error",disabled:e.bestellingLaden},on:{click:e.annuleer}},[n("v-icon",{attrs:{dark:""}},[e._v("mdi-close")])],1)],1)],1)},Je=[],Ke=r["a"].extend({name:"BestellingSamenvatting",props:{bestellingLaden:Boolean,persoon:Object,totaal:Number,plaatsBestelling:Function,annuleer:Function},methods:{formatBedrag:Se}}),Fe=Ke,Ge=n("8336"),He=n("a609"),Ze=n("ce7e"),Xe=Object(d["a"])(Fe,We,Je,!1,null,"03a46a4e",null),Ye=Xe.exports;b()(Xe,{VBtn:Ge["a"],VBtnToggle:He["a"],VDivider:Ze["a"],VIcon:j["a"],VList:y["a"],VListItem:O["a"],VListItemSubtitle:T["b"],VListItemTitle:T["c"]});var Qe=r["a"].extend({name:"Bestelling",components:{BestellingSamenvatting:Ye,ProductWeergave:Me,Numpad:ye},props:{socCieId:String,bestellingId:{type:String,default:""}},data:function(){return{aantal:"",bestellingLaden:!1,forceBestelling:!1}},created:function(){if(this.$store.commit("setSelectie",this.socCieId),this.bestellingId){var e=this.$store.state.producten;this.$store.commit("setInvoer",Object.entries(this.$store.state.bestelling.bestellingen[this.bestellingId].bestelLijst).map((function(t){var n=Object(ce["a"])(t,2),r=n[0],a=n[1];return{aantal:a,product:e[r]}})))}},computed:{producten:function(){return this.$store.getters.zichtbareProducten},persoon:function(){return this.socCieId?this.$store.state.personen[this.socCieId]:null},totaal:function(){var e=Object.values(this.bestellingInhoud);return $e.apply(void 0,Object(le["a"])(e.map((function(e){return Number(e.product.prijs)*e.aantal}))))},bestellingInhoud:function(){return this.$store.state.invoer.inhoud}},methods:{formatBedrag:Se,verwijderInvoer:function(e){this.$store.commit("verwijderInvoer",e)},selecteerInvoer:function(e){this.$store.commit("selecteerInvoer",{product:e,aantal:this.aantal}),this.aantal=""},plaatsBestelling:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.bestellingLaden=!0,t.prev=1,t.next=4,e.$store.dispatch("plaatsBestelling",{inhoud:e.bestellingInhoud,persoon:e.persoon,force:e.forceBestelling});case 4:return e.forceBestelling=!1,t.next=7,e.$store.dispatch("postLogin");case 7:return e.bestellingLaden=!1,e.$store.commit("clearInvoer"),e.$store.commit("setSelectie",null),t.next=12,e.$router.replace("/personen");case 12:t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](1),t.t0 instanceof Be?setTimeout((function(){e.forceBestelling=!0,e.bestellingLaden=!1}),3e3):e.bestellingLaden=!1;case 17:case"end":return t.stop()}}),t,null,[[1,14]])})))()},annuleer:function(){this.$store.commit("clearInvoer"),this.aantal="",this.forceBestelling=!1,this.$store.commit("setSelectie",null),this.$router.replace("/personen")}}}),qe=Qe,et=(n("e62c"),Object(d["a"])(qe,ie,se,!1,null,"53b48801",null)),tt=et.exports;b()(et,{VAppBar:k["a"],VBtn:Ge["a"],VCard:Ae["a"],VCardText:Ne["b"],VCardTitle:Ne["c"],VCol:De["a"],VIcon:j["a"],VRow:ze["a"],VSpacer:L["a"],VToolbarTitle:P["a"]});var nt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-main",{staticClass:"login-main"},[n("h1",[e._v("Barsysteem C.S.R.")]),n("p",[e._v("Welkom "),e.vertrouwd?n("span",[e._v("terug")]):e._e(),e._v(" bij het barsysteem, gebruik je stek account om in te loggen.")]),n("v-btn",{on:{click:function(t){return e.$router.push("/auth/csr")}}},[e._v("Login")])],1)],1)},rt=[],at=r["a"].extend({name:"Login",computed:{vertrouwd:function(){return!!this.$store.state.user.locatieToken}},created:function(){this.$store.state.user.tokenData&&this.$router.push("/personen")}}),ot=at,it=(n("bc50"),Object(d["a"])(ot,nt,rt,!1,null,"c95c3c8a",null)),st=it.exports;b()(it,{VBtn:Ge["a"],VContainer:x["a"],VMain:S["a"]});var lt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-main",{staticClass:"logout-main"},[n("h1",[e._v("Weet je zeker dat je wil uitloggen?")]),n("v-btn",{attrs:{type:"primary"},on:{click:e.logout}},[e._v("Uitloggen")]),n("v-btn",{on:{click:function(t){return e.$router.push("/")}}},[e._v("Terug")])],1)],1)},ct=[],ut=r["a"].extend({name:"Logout",methods:{logout:function(){this.$router.push("/auth/logout")}}}),dt=ut,pt=(n("6217"),Object(d["a"])(dt,lt,ct,!1,null,"15e2fc4e",null)),vt=pt.exports;b()(pt,{VBtn:Ge["a"],VContainer:x["a"],VMain:S["a"]});var ft=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-main",[n("h1",[e._v("Uitloggen...")])])],1)},mt=[],ht=r["a"].extend({name:"Logout",created:function(){this.$store.commit("setToken",null),this.$router.push("/")}}),bt=ht,gt=Object(d["a"])(bt,ft,mt,!1,null,"fb83691c",null),kt=gt.exports;b()(gt,{VContainer:x["a"],VMain:S["a"]});var wt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"hello"},[n("Keyboard",{model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),n("LedenTable",{attrs:{zoeken:e.value}})],1)},xt=[],_t=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("SimpleKeyboard",{attrs:{modelValue:e.modelValue,"keyboard-class":"full-keyboard"},on:{"update:modelValue":e.emitValue}})},jt=[],yt=(n("d2db"),r["a"].extend({name:"Keyboard",model:{prop:"modelValue",event:"update:modelValue"},components:{SimpleKeyboard:we},props:{modelValue:{type:String}},methods:{emitValue:function(e){var t,n=e;n&&(n=null===(t=n)||void 0===t?void 0:t.toUpperCase());this.$emit("update:modelValue",n)}}})),Ot=yt,Vt=(n("681b"),Object(d["a"])(Ot,_t,jt,!1,null,null,null)),It=Vt.exports,Tt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-data-table",{attrs:{headers:e.headers,items:e.personen,"item-key":"socCieId","item-class":e.tableRowClassName},on:{"click:row":e.rowClick},scopedSlots:e._u([{key:"item.saldo",fn:function(t){var n=t.item;return[e._v(" "+e._s(e.formatBedrag(n.saldo))+" ")]}}])})},St=[],$t=(n("466d"),r["a"].extend({name:"LedenTable",props:{zoeken:String},computed:{personen:function(){return this.$store.getters.personenWeergave.filter(this.filterPersoon)},headers:function(){return[{text:"Bijnaam",value:"bijnaam"},{text:"Naam",value:"naam"},{text:"Saldo",value:"saldo"}]}},methods:{formatBedrag:Se,rowClick:function(e){this.$router.push("/invoer/".concat(e.socCieId))},tableRowClassName:function(e){var t=e.saldo<0?"error":"success";return this.$vuetify.theme.dark?t+" darken-4":t+" lighten-5"},filterPersoon:function(e){return e.bijnaam.toUpperCase().match(this.zoeken)||e.naam.toUpperCase().match(this.zoeken)}}})),Ct=$t,Bt=n("8fea"),Lt=Object(d["a"])(Ct,Tt,St,!1,null,"41bf59f4",null),Pt=Lt.exports;b()(Lt,{VDataTable:Bt["a"]});var Rt=r["a"].extend({name:"Personen",components:{LedenTable:Pt,Keyboard:It},data:function(){return{value:""}},computed:{upperValue:function(){return this.value.toUpperCase()}},methods:{change:function(e){this.value=e}}}),Et=Rt,At=(n("34c4"),Object(d["a"])(Et,wt,xt,!1,null,null,null)),Nt=At.exports,Dt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",[n("v-col",{attrs:{cols:"3"}},[n("v-switch",{attrs:{label:"Alleen geselecteerde persoon"},model:{value:e.zoekInAlles,callback:function(t){e.zoekInAlles=t},expression:"zoekInAlles"}})],1),n("v-col",{attrs:{cols:"3"}},[n("v-menu",{ref:"datumMenu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,a=t.attrs;return[n("v-text-field",e._g(e._b({attrs:{label:"Datum","prepend-icon":"mdi-calendar",readonly:""},model:{value:e.datumText,callback:function(t){e.datumText=t},expression:"datumText"}},"v-text-field",a,!1),r))]}}]),model:{value:e.datumMenu,callback:function(t){e.datumMenu=t},expression:"datumMenu"}},[n("v-date-picker",{attrs:{range:"",min:"1950-01-01"},model:{value:e.datum,callback:function(t){e.datum=t},expression:"datum"}})],1)],1),n("v-col",{attrs:{cols:"3"}},[n("v-dialog",{scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,a=t.attrs;return[n("v-btn",e._g(e._b({attrs:{title:"Filter op specifieke producten",type:e.isIndeterminate?"primary":"default"}},"v-btn",a,!1),r),[n("v-icon",[e._v("mdi-tune")]),e._v(" Producten ")],1)]}}]),model:{value:e.productSelectieZichtbaar,callback:function(t){e.productSelectieZichtbaar=t},expression:"productSelectieZichtbaar"}},[n("v-card",[n("v-card-title",[e._v("Selecteer producten")]),n("v-card-text",[n("v-checkbox",{attrs:{indeterminate:e.isIndeterminate,label:"Alle"},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("Alle ")]),n("v-divider"),n("v-row",e._l(e.producten,(function(t){return n("v-col",{key:t.productId,attrs:{cols:"3"}},[n("v-checkbox",{attrs:{value:t.productId,label:t.beschrijving},model:{value:e.selectedProducten,callback:function(t){e.selectedProducten=t},expression:"selectedProducten"}})],1)})),1)],1)],1)],1)],1),n("v-col",{attrs:{cols:"3"}},[n("v-btn",{attrs:{size:"medium"},on:{click:e.zoeken}},[e._v("Zoeken")])],1),n("v-col",[n("v-data-table",{attrs:{items:e.bestellingen,headers:e.headers},scopedSlots:e._u([{key:"item.persoon",fn:function(t){var n=t.item;return[e._v(" "+e._s(e.naamFormatter(n))+" ")]}},{key:"item.bestelLijst",fn:function(t){var r=t.item;return[n("ul",e._l(e.getBestelLijstString(r.bestelLijst),(function(t){return n("li",{key:t},[e._v(" "+e._s(t)+" ")])})),0)]}},{key:"item.bestelTotaal",fn:function(t){var n=t.item;return[e._v(" "+e._s(e.formatBedrag(n.bestelTotaal))+" ")]}},{key:"item.opties",fn:function(t){var r=t.item;return["0"===r.deleted?n("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.handleEdit(r)}}},[e._v(" mdi-pencil ")]):e._e(),"0"===r.deleted?n("v-icon",{attrs:{small:""},on:{click:function(t){return e.handleVerwijder(r)}}},[e._v(" mdi-delete ")]):e._e(),"1"===r.deleted?n("v-icon",{attrs:{small:""},on:{click:function(t){return e.handleHerstel(r)}}},[e._v("mdi-restore")]):e._e()]}}])})],1)],1)},zt=[],Ut=(n("a15b"),r["a"].extend({name:"Bestellingen",computed:{bestellingen:function(){return Object.values(this.$store.state.bestelling.bestellingen)},producten:function(){return Object.values(this.$store.state.producten).filter((function(e){return"0"===e.beheer&&"1"===e.status}))},headers:function(){return[{text:"Naam",value:"persoon"},{text:"Datum en tijd",value:"tijd"},{text:"Totaal",value:"bestelTotaal"},{text:"Bestelling",value:"bestelLijst"},{text:"Opties",value:"opties",sortable:!1}]},isIndeterminate:function(){return this.selectedProducten.length>0&&this.selectedProducten.length<this.producten.length},datumText:function(){return this.datum.join(" ~ ")}},data:function(){return{verwijderLaden:{},herstelLaden:{},productSelectieZichtbaar:!1,zoekInAlles:!0,datum:[new Date(+new Date-1296e6).toISOString().substr(0,10),(new Date).toISOString().substr(0,10)],datumMenu:!1,selectedProducten:[],checkAll:!1,shortcuts:[{text:"Afgelopen week",value:function(){var e=new Date,t=new Date;return t.setTime(t.getTime()-6048e5),[t,e]}()},{text:"Laatste 2 weken",value:function(){var e=new Date,t=new Date;return t.setTime(t.getTime()-1296e6),[t,e]}()},{text:"Afgelopen maand",value:function(){var e=new Date,t=new Date;return t.setTime(t.getTime()-2592e6),[t,e]}()},{text:"Laatste 3 maanden",value:function(){var e=new Date,t=new Date;return t.setTime(t.getTime()-7776e6),[t,e]}()}]}},methods:{naamFormatter:function(e){var t;return null===(t=this.getPersoon(e.persoon))||void 0===t?void 0:t.naam},getPersoon:function(e){return this.$store.state.personen[e]},getProduct:function(e){return this.$store.state.producten[e]},getBestelLijstString:function(e){var t=this;return Object.entries(e).map((function(e){var n,r=Object(ce["a"])(e,2),a=r[0],o=r[1];return"".concat(o," ").concat(null===(n=t.getProduct(a))||void 0===n?void 0:n.beschrijving)}))},formatBedrag:Se,handleCheckedProductenChange:function(e){this.checkAll=e.length===this.producten.length},handleCheckAllChange:function(e){this.selectedProducten=e?this.producten.map((function(e){return e.productId})):[]},handleEdit:function(e){this.$router.push("/invoer/".concat(e.persoon,"/bewerken/").concat(e.bestelId))},handleVerwijder:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.verwijderLaden[e.bestelId]=!0,n.prev=1,n.next=4,t.$store.dispatch("verwijderBestelling",e);case 4:n.next=8;break;case 6:n.prev=6,n.t0=n["catch"](1);case 8:delete t.verwijderLaden[e.bestelId];case 9:case"end":return n.stop()}}),n,null,[[1,6]])})))()},handleHerstel:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.herstelLaden[e.bestelId]=!0,n.prev=1,n.next=4,t.$store.dispatch("herstelBestelling",e);case 4:n.next=8;break;case 6:n.prev=6,n.t0=n["catch"](1);case 8:delete t.verwijderLaden[e.bestelId];case 9:case"end":return n.stop()}}),n,null,[[1,6]])})))()},zoeken:function(){this.$store.dispatch("fetchBestellingen",{aantal:this.zoekInAlles?"alles":this.$store.state.user.selectie,begin:this.datum[0],eind:this.datum[1],productType:this.selectedProducten})}},created:function(){var e=this;setTimeout((function(){e.$store.dispatch("fetchBestellingen",{aantal:"alles",begin:"",eind:"",productType:[]})}),1e3)}})),Mt=Ut,Wt=(n("e06c"),n("ac7c")),Jt=n("2e4b"),Kt=n("169a"),Ft=n("e449"),Gt=n("b73d"),Ht=Object(d["a"])(Mt,Dt,zt,!1,null,null,null),Zt=Ht.exports;b()(Ht,{VBtn:Ge["a"],VCard:Ae["a"],VCardText:Ne["b"],VCardTitle:Ne["c"],VCheckbox:Wt["a"],VCol:De["a"],VDataTable:Bt["a"],VDatePicker:Jt["a"],VDialog:Kt["a"],VDivider:Ze["a"],VIcon:j["a"],VMenu:Ft["a"],VRow:ze["a"],VSwitch:Gt["a"],VTextField:ge["a"]});var Xt=n("852e"),Yt=n.n(Xt),Qt={sameSite:"strict"},qt=function(e){Yt.a.set("token",JSON.stringify(e),Qt)},en=function(){return Yt.a.remove("token",Qt)},tn=function(){var e=Yt.a.get("token");return e?JSON.parse(e):null},nn=function(){var e=tn();return e?new F["Token"](Z,e):null},rn=function(e){return null==e?null:new F["Token"](Z,e)},an={sameSite:"strict",expires:new Date(+new Date+864e8)},on=function(e){Yt.a.set("locatie-token",JSON.stringify(e),an)},sn=function(){Yt.a.remove("locatie-token",an)},ln=function(){var e=Yt.a.get("locatie-token");return e?JSON.parse(e):null},cn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v("Welkom in het bar systeem! "+e._s(e.profielNaam))]),n("p",[n("v-btn",{attrs:{"x-large":"",to:"/personen"}},[e._v("Beginnen")])],1),e.isAdmin?n("div",[e.vertrouwd?n("div",[n("p",[e._v("Deze locatie is vertrouwd: "+e._s(e.vertrouwd.naam))]),n("v-btn",{attrs:{color:"primary"},on:{click:e.stopVertrouwen}},[e._v(" Deze locatie niet langer vertrouwen. ")])],1):n("div",[n("p",[e._v(" Door een locatie te vertrouwen wordt het mogelijk voor alle leden om in te loggen in het bar systeem. Gebruik deze functie alleen op vertrouwde plekken. ")]),n("p",[n("v-text-field",{attrs:{label:"Naam van deze locatie"},model:{value:e.naam,callback:function(t){e.naam=t},expression:"naam"}}),n("v-btn",{attrs:{color:"primary"},on:{click:e.vertrouw}},[e._v("Vertrouw deze locatie")])],1)])]):e._e()])},un=[],dn=(n("caad"),n("2532"),r["a"].extend({name:"PostLogin",data:function(){return{naam:""}},computed:{profielNaam:function(){var e,t;return null!==(e=null===(t=this.$store.state.user.profiel)||void 0===t?void 0:t.displayName)&&void 0!==e?e:""},vertrouwd:function(){return this.$store.state.user.locatieToken},isAdmin:function(){var e,t;return null!==(e=null===(t=this.$store.state.user.profiel)||void 0===t?void 0:t.scopes.includes("BAR:TRUST"))&&void 0!==e&&e}},methods:{vertrouw:function(){this.$store.dispatch("vertrouwLocatie",this.naam)},stopVertrouwen:function(){this.$store.commit("setLocatieToken",null)}}})),pn=dn,vn=Object(d["a"])(pn,cn,un,!1,null,"63510e7c",null),fn=vn.exports;b()(vn,{VBtn:Ge["a"],VTextField:ge["a"]}),r["a"].use(W["a"]);var mn=[{path:"/",name:"Home",component:st},{path:"/personen",name:"Persoonselectie",component:Nt},{path:"/invoer/:socCieId",name:"Invoer",component:tt,props:!0},{path:"/invoer/:socCieId/bewerken/:bestellingId",name:"Invoer bewerken",component:tt,props:!0},{path:"/bestellingen",name:"Bestellingen",component:Zt},{path:"/auth/csr",name:"Authorize",component:q},{path:"/auth/callback",name:"AuthCallback",component:oe},{path:"/logout",name:"Logout",component:vt},{path:"/auth/logout",name:"AuthLogout",component:kt},{path:"/auth/post-login",name:"Welcome",component:fn}],hn=new W["a"]({mode:"history",routes:mn});hn.beforeEach((function(e,t,n){if("/"!==e.path&&!e.path.startsWith("/auth")){var r=nn();if(!r)return void n({path:"/"})}n()}));var bn=hn,gn=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=nn(),n){e.next=5;break}return e.next=4,bn.push("/auth/logout");case 4:throw new Error("Geen token");case 5:return e.prev=5,e.next=8,M()(n.sign(Object(z["a"])(Object(z["a"])({},t),{},{headers:Object(z["a"])(Object(z["a"])({},t.headers),{},{"Content-Type":"application/json","X-Bar-Token":ln()}),url:"https://csrdelft.nl"+t.url})));case 8:return r=e.sent,e.abrupt("return",r.data);case 12:if(e.prev=12,e.t0=e["catch"](5),!e.t0.response||401!==e.t0.response.status){e.next=18;break}return e.next=17,bn.push("/auth/logout");case 17:throw new Error("Niet ingelogd!");case 18:throw new Error(e.t0.message);case 19:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t){return e.apply(this,arguments)}}(),kn=function(e){return e},wn=kn({state:function(){return{bestellingen:{}}},mutations:{setBestellingen:function(e,t){e.bestellingen=Object.fromEntries(Object.values(t).map((function(e){return[e.bestelId,e]})))},updateBestelling:function(e,t){e.bestellingen[t.bestelId]=t}},actions:{fetchBestellingen:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.state,n.next=3,gn({url:"/api/v3/bar/laadLaatste",method:"POST",data:JSON.stringify(t)});case 3:r.bestellingen=n.sent;case 4:case"end":return n.stop()}}),n)})))()},verwijderBestelling:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,n.next=3,gn({url:"/api/v3/bar/verwijderBestelling",method:"POST",data:JSON.stringify({verwijderBestelling:t})});case 3:if(a=n.sent,a){n.next=6;break}throw new Error("Verwijderen van bestelling mislukt");case 6:r("updateBestelling",Object(z["a"])(Object(z["a"])({},t),{},{deleted:"1"}));case 7:case"end":return n.stop()}}),n)})))()},herstelBestelling:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,n.next=3,gn({url:"/api/v3/bar/undoVerwijderBestelling",method:"POST",data:JSON.stringify({undoVerwijderBestelling:t})});case 3:if(a=n.sent,a){n.next=6;break}throw new Error("Herstellen van bestelling mislukt");case 6:r("updateBestelling",Object(z["a"])(Object(z["a"])({},t),{},{deleted:"0"}));case 7:case"end":return n.stop()}}),n)})))()}},getters:{}}),xn=function(e){return e},_n=xn({state:function(){return{inhoud:{}}},mutations:{setInvoer:function(e,t){e.inhoud=Object.fromEntries(Object.values(t).map((function(e){return[e.product.productId,e]})))},selecteerInvoer:function(e,t){var n=t.product,a=t.aantal;n.productId in e.inhoud||r["a"].set(e.inhoud,n.productId,{product:n,aantal:0}),r["a"].set(e.inhoud,n.productId,Object(z["a"])(Object(z["a"])({},e.inhoud[n.productId]),{},{aantal:e.inhoud[n.productId].aantal+(Number(a)||1)})),0===e.inhoud[n.productId].aantal&&r["a"].delete(e.inhoud,n.productId)},verwijderInvoer:function(e,t){r["a"].delete(e.inhoud,t)},clearInvoer:function(e){e.inhoud={}}},actions:{plaatsBestelling:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i,s,l,c,u,d,p,v,f,m,h;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.state,a=e.rootGetters,o=t.oudeInhoud,i=t.force,s=void 0!==i&&i,l=s,c=a.huidigePersoon,u=Ce(c),d=$e.apply(void 0,Object(le["a"])(Object.values(r.inhoud).map((function(e){return e.aantal*Number(e.product.prijs)})))),o?(v=$e.apply(void 0,Object(le["a"])(Object.values(o).map((function(e){return e.aantal*Number(e.product.prijs)})))),p=c.saldo+v-d<0):p=c.saldo-d<0,(d<=0||"S_NOBODY"===c.status)&&(p=!1),f=0===Object.values(r.inhoud).length,!u||!p){n.next=13;break}throw new Error("Oudleden kunnen niet rood staan, inleg vereist!");case 13:if(!c||f){n.next=26;break}if(l||!p){n.next=18;break}throw new Be("Laat lid inleggen. Saldo wordt negatief.");case 18:return m={persoon:c,bestelTotaal:d,bestelLijst:Object.fromEntries(Object.values(r.inhoud).map((function(e){return[e.product.productId,e.aantal]}))),oudeBestelling:o},n.next=21,gn({url:"/api/v3/bar/bestelling",method:"POST",data:{bestelling:JSON.stringify(m)}});case 21:if(h=n.sent,h){n.next=24;break}throw new Error('Er ging iets mis! "'.concat(h,'"'));case 24:n.next=28;break;case 26:if(!f){n.next=28;break}throw new Error("Geen bestelling ingevoerd!");case 28:case"end":return n.stop()}}),n)})))()}},getters:{}}),jn=function(e){return e},yn=jn({state:function(){return{profiel:null,tokenData:null,selectie:null,locatieToken:null}},getters:{token:function(e){return rn(e.tokenData)},huidigePersoon:function(e,t,n){return e.selectie?n.personen[e.selectie]:null}},mutations:{setToken:function(e,t){e.tokenData=t},setLocatieToken:function(e,t){e.locatieToken=t},setProfiel:function(e,t){e.profiel=t},setSelectie:function(e,t){e.selectie=t}},actions:{fetchProfiel:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,gn({url:"/api/v3/profiel",method:"GET"});case 3:r=t.sent,n("setProfiel",r);case 5:case"end":return t.stop()}}),t)})))()}}});r["a"].use(D["a"]);var On=function(e,t){return function(n){var r=tn();r&&n.commit(e,r);var a=ln();a&&n.commit(t,a),n.subscribe((function(n){n.type===e&&(n.payload?qt(n.payload):en()),n.type===t&&(n.payload?on(n.payload):sn())}))}},Vn=new D["a"].Store({devtools:!0,plugins:[On("setToken","setLocatieToken")],state:function(){return{profiel:null,personen:{},producten:{}}},getters:{zichtbareProducten:function(e){return Object.values(e.producten).filter((function(e){return"0"===e.beheer&&"1"===e.status}))},personenWeergave:function(e){return Object.values(e.personen).filter((function(e){return"0"===e.deleted})).sort((function(e,t){return t.recent-e.recent}))}},mutations:{setPersonen:function(e,t){e.personen=t},setProducten:function(e,t){e.producten=t}},actions:{listUsers:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,gn({url:"/api/v3/bar/personen",method:"POST"});case 3:r=t.sent,a=Object.values(r),o=Object.fromEntries(a.map((function(e){return[e.socCieId,e]}))),n("setPersonen",o);case 7:case"end":return t.stop()}}),t)})))()},listProducten:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,gn({url:"/api/v3/bar/producten",method:"POST"});case 3:r=t.sent,a=Object.values(r),o=Object.fromEntries(a.map((function(e){return[e.productId,e]}))),n("setProducten",o);case 7:case"end":return t.stop()}}),t)})))()},postLogin:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.dispatch,t.next=3,n("fetchProfiel");case 3:return t.next=5,n("listUsers");case 5:return t.next=7,n("listProducten");case 7:case"end":return t.stop()}}),t)})))()},vertrouwLocatie:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,n.next=3,gn({url:"/api/v3/bar/trust",method:"POST",data:JSON.stringify({naam:t})});case 3:a=n.sent,r("setLocatieToken",a);case 5:case"end":return n.stop()}}),n)})))()}},modules:{bestelling:wn,invoer:_n,user:yn}});r["a"].config.productionTip=!1,new r["a"]({vuetify:N,store:Vn,router:bn,render:function(e){return e(E)}}).$mount("#app")},dad7:function(e,t,n){},dfa6:function(e,t,n){},e06c:function(e,t,n){"use strict";n("e1c8")},e1c8:function(e,t,n){},e62c:function(e,t,n){"use strict";n("243c")}});
//# sourceMappingURL=app.a619e637.js.map