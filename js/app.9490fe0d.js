(function(e){function t(t){for(var r,i,s=t[0],l=t[1],c=t[2],d=0,p=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&p.push(a[i][0]),a[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);u&&u(t);while(p.length)p.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,s=1;s<n.length;s++){var l=n[s];0!==a[l]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={app:0},o=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},1:function(e,t){},"1c0d":function(e,t,n){"use strict";n("dfa6")},"1ebd":function(e,t,n){},"34c4":function(e,t,n){"use strict";n("a547")},"4f9a":function(e,t,n){"use strict";n("1ebd")},"5c0b":function(e,t,n){"use strict";n("9c0c")},"63b2":function(e,t,n){"use strict";n("f0c0")},"681b":function(e,t,n){"use strict";n("dad7")},"9c0c":function(e,t,n){},a547:function(e,t,n){},b9b1:function(e,t,n){},bc50:function(e,t,n){"use strict";n("b9b1")},c97a:function(e,t,n){"use strict";n("fb94")},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("v-navigation-drawer",{attrs:{app:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[n("v-list",{attrs:{nav:"",dense:""}},[n("v-list-item-group",{attrs:{act:""}},[n("v-list-item",{attrs:{to:"/personen"}},[n("v-list-item-icon",[n("v-icon",[e._v("mdi-home")])],1),n("v-list-item-title",[e._v("Personen")])],1),n("v-list-item",{attrs:{disabled:null==e.bestellingUrl,to:e.bestellingUrl}},[n("v-list-item-icon",[n("v-icon",[e._v("mdi-account")])],1),n("v-list-item-title",[e._v("Invoer")])],1),n("v-list-item",{attrs:{to:"/bestellingen"}},[n("v-list-item-icon",[n("v-icon",[e._v("mdi-account")])],1),n("v-list-item-title",[e._v("Bestellingen")])],1),n("v-list-item",{attrs:{to:"/auth/logout"}},[n("v-list-item-icon",[n("v-icon",[e._v("mdi-account")])],1),n("v-list-item-title",[e._v("Uitloggen")])],1)],1)],1)],1),n("v-app-bar",{attrs:{app:""}},[n("v-app-bar-nav-icon",{on:{click:function(t){e.drawer=!0}}}),n("v-toolbar-title",[e._v("C.S.R. Bar")])],1),n("v-main",[n("v-container",{attrs:{fluid:""}},[n("router-view")],1)],1),n("v-footer",{attrs:{app:""}}),n("v-overlay",{attrs:{value:e.loading}},[n("v-progress-circular",{attrs:{indeterminate:"",size:"64"}})],1)],1)},o=[],i=n("1da1"),s=(n("96cf"),r["a"].extend({name:"App",data:function(){return{loading:!0,drawer:!1}},computed:{loggedIn:function(){return Boolean(this.$store.getters.token)},currentRoute:function(){return this.$router.currentRoute.path},bestellingUrl:function(){var e=this.$store.state.user.selectie;return e?"/invoer/".concat(e):null},vertrouwd:function(){return this.$store.state.user.locatieToken}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.loggedIn){t.next=9;break}return t.prev=1,t.next=4,e.$store.dispatch("postLogin");case 4:return t.prev=4,e.loading=!1,t.finish(4);case 7:t.next=10;break;case 9:e.loading=!1;case 10:case"end":return t.stop()}}),t,null,[[1,,4,7]])})))()}})),l=s,c=(n("5c0b"),n("2877")),u=n("6544"),d=n.n(u),p=n("7496"),v=n("40dc"),f=n("5bc1"),m=n("a523"),h=n("553a"),b=n("132d"),g=n("8860"),w=n("da13"),k=n("1baa"),x=n("34c3"),j=n("5d23"),y=n("f6c4"),O=n("f774"),_=n("a797"),V=n("490a"),I=n("2a7f"),S=Object(c["a"])(l,a,o,!1,null,null,null),$=S.exports;d()(S,{VApp:p["a"],VAppBar:v["a"],VAppBarNavIcon:f["a"],VContainer:m["a"],VFooter:h["a"],VIcon:b["a"],VList:g["a"],VListItem:w["a"],VListItemGroup:k["a"],VListItemIcon:x["a"],VListItemTitle:j["c"],VMain:y["a"],VNavigationDrawer:O["a"],VOverlay:_["a"],VProgressCircular:V["a"],VToolbarTitle:I["a"]});var B=n("f309");r["a"].use(B["a"]);var T=new B["a"]({theme:{dark:!0}}),C=(n("4de4"),n("07ac"),n("4e827"),n("c1f9"),n("d81d"),n("2f62")),L=n("5530"),P=n("bc3a"),R=n.n(P),E=(n("2ca0"),n("8c4f")),A=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-overlay",{attrs:{value:e.loading}},[n("v-progress-circular",{attrs:{indeterminate:"",size:"64"}}),e._v(" "+e._s(e.msg)+" ")],1)},N=[],D=n("a981"),z=n.n(D),U=new z.a({clientId:"bar",authorizationUri:"".concat("https://csrdelft.nl","/authorize"),accessTokenUri:"".concat("https://csrdelft.nl","/api/v3/token"),redirectUri:"".concat(window.location.origin,"/auth/callback"),scopes:["BAR:NORMAAL","BAR:BEHEER","BAR:TRUST"]}),W=U,J=r["a"].extend({name:"Authorize",data:function(){return{msg:"Wachten op autorisatie",loading:!1}},methods:{setLoading:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.loading=!1,t.msg=e,n.next=4,t.$nextTick();case 4:t.loading=!0;case 5:case"end":return n.stop()}}),n)})))()}},created:function(){var e=this;this.$store.state.user.tokenData?this.$router.push("/auth/post-login"):(window.open(W.token.getUri()),this.loading=!0,window.oauth2Callback=function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.setLoading("Token laden...");case 2:return t.prev=2,t.next=5,W.token.getToken(n);case 5:return r=t.sent,t.next=8,e.$store.commit("setToken",r.data);case 8:t.next=12;break;case 10:t.prev=10,t.t0=t["catch"](2);case 12:return t.next=14,e.setLoading("Profiel laden...");case 14:return t.next=16,e.$store.dispatch("postLogin");case 16:return e.loading=!1,t.next=19,e.$router.push("/auth/post-login");case 19:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}())}}),K=J,M=Object(c["a"])(K,A,N,!1,null,"4cf892d6",null),G=M.exports;d()(M,{VOverlay:_["a"],VProgressCircular:V["a"]});var F=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v("Redirecting back")])},Z=[],H=r["a"].extend({name:"AuthCallback",created:function(){window.opener&&window.opener.oauth2Callback(window.location.href),window.close()}}),X=H,Y=Object(c["a"])(X,F,Z,!1,null,"aea0d49a",null),Q=Y.exports,q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.persoon?n("div",[n("v-row",{attrs:{gutter:20}},[n("v-col",{attrs:{cols:"8"}},[n("v-row",{staticClass:"bestelling-inhoud"},e._l(e.bestellingInhoud,(function(t){return n("v-col",{key:t.product.productId,attrs:{cols:"3"}},[n("div",{staticClass:"product",on:{click:function(n){return e.verwijderInvoer(t.product.productId)}}},[e._v(" "+e._s(t.aantal)+" "+e._s(t.product.beschrijving)+" "),n("span",{staticClass:"el-icon-close"})])])})),1),n("ProductWeergave",{attrs:{producten:e.producten},on:{selecteer:e.selecteerInvoer}})],1),n("v-col",{attrs:{cols:"4"}},[n("Numpad",{attrs:{"default-value":"1"},model:{value:e.aantal,callback:function(t){e.aantal=t},expression:"aantal"}}),n("BestellingSamenvatting",{attrs:{"bestelling-laden":e.bestellingLaden,persoon:e.persoon,totaal:e.totaal,annuleer:e.annuleer,plaatsBestelling:e.plaatsBestelling}})],1)],1)],1):e._e()},ee=[],te=n("2909"),ne=n("3835"),re=(n("4fad"),n("a9e3"),n("ac1f"),n("5319"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("SimpleKeyboard",{attrs:{layout:["7 8 9","4 5 6","1 2 3","{bksp} 0 {neg}"],display:{"{bksp}":"<","{neg}":"-"},modelValue:e.modelValue,defaultValue:e.defaultValue},on:{"update:modelValue":function(t){return e.$emit("update:modelValue",t)}}})}),ae=[],oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"simple-keyboard-input"},[n("v-text-field",{attrs:{value:e.modelValue,placeholder:e.defaultValue},on:{input:e.onChange}})],1),n("div",{class:e.keyboardClass+" hg-theme-default"})])},ie=[],se=(n("fb6a"),n("dd7f")),le=n.n(se),ce=r["a"].extend({name:"SimpleKeyboard",model:{prop:"modelValue",event:"update:modelValue"},props:{layout:{default:function(){return["Q W E R T Y U I O P {bksp}","A S D F G H J K L {leeg}","Z X C V B N M {space}"]},type:Array},display:{default:function(){return{"{leeg}":"Leeg","{space}":"Spatie","{bksp}":"Delete"}},type:Object},keyboardClass:{default:"simple-keyboard",type:String},modelValue:{type:String},defaultValue:{default:"",type:String}},data:function(){return{keyboard:null}},mounted:function(){this.keyboard=new le.a(this.keyboardClass,{onChange:this.onChange,onKeyPress:this.onKeyPress,display:this.display,layout:{default:this.layout}})},methods:{onChange:function(e){this.$emit("update:modelValue",e)},onKeyPress:function(e){this.$emit("keypress",e),"{shift}"!==e&&"{lock}"!==e||this.handleShift(),"{leeg}"===e&&this.handleLeeg(),"{neg}"===e&&this.handleNeg()},handleNeg:function(){this.modelValue&&this.modelValue.startsWith("-")?this.onChange(this.modelValue.slice(1)):""===this.modelValue?this.onChange("-1"):this.onChange("-".concat(this.modelValue))},handleLeeg:function(){this.keyboard&&this.keyboard.setInput("")},handleShift:function(){var e,t=null===(e=this.keyboard)||void 0===e?void 0:e.options.layoutName,n="default"===t?"shift":"default";this.keyboard&&this.keyboard.setOptions({layoutName:n})}},watch:{modelValue:function(e){this.keyboard&&this.keyboard.setInput(e)}}}),ue=ce,de=(n("1c0d"),n("8654")),pe=Object(c["a"])(ue,oe,ie,!1,null,null,null),ve=pe.exports;d()(pe,{VTextField:de["a"]});var fe=r["a"].extend({name:"Numpad",components:{SimpleKeyboard:ve},props:{modelValue:String,defaultValue:{default:"",type:String}}}),me=fe,he=Object(c["a"])(me,re,ae,!1,null,"06eb6273",null),be=he.exports,ge=n("d4ec"),we=n("262e"),ke=n("2caf"),xe=n("9072"),je=(n("99af"),function(e){var t=String(Math.abs(e%100));if("0"===t?t="00":Number(t)<10&&(t="0".concat(t)),e>-100&&e<0)return"€-0,".concat(t);var n="€".concat((e-e%100)/100,",").concat(t);return n.replace("€-","-€")}),ye=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return e+t}),0)},Oe=function(e){return"S_LID"!==e.status&&"S_GASTLID"!==e.status&&"S_NOVIET"!==e.status},_e=function(e){Object(we["a"])(n,e);var t=Object(ke["a"])(n);function n(){return Object(ge["a"])(this,n),t.apply(this,arguments)}return n}(Object(xe["a"])(Error)),Ve=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{attrs:{gutter:20}},e._l(e.producten,(function(t){return n("v-col",{key:t.productId,attrs:{span:4}},[n("v-btn",{staticClass:"btn-product",on:{click:function(n){return e.$emit("selecteer",t)}}},[n("div",[e._v(e._s(t.beschrijving))]),n("div",[e._v(e._s(e.formatBedrag(t.prijs)))])])],1)})),1)},Ie=[],Se=r["a"].extend({name:"ProductWeergave",props:{producten:{type:Array,default:function(){return[]}}},methods:{formatBedrag:je}}),$e=Se,Be=(n("63b2"),n("8336")),Te=n("62ad"),Ce=n("0fd9"),Le=Object(c["a"])($e,Ve,Ie,!1,null,"7c2de785",null),Pe=Le.exports;d()(Le,{VBtn:Be["a"],VCol:Te["a"],VRow:Ce["a"]});var Re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-list",{attrs:{"two-line":""}},[n("v-list-item",[n("v-list-item-title",[e._v("Huidig saldo")]),n("v-list-item-subtitle",[e._v(e._s(e.formatBedrag(e.persoon.saldo)))])],1),n("v-list-item",[n("v-list-item-title",[e._v("Totaal bestelling")]),n("v-list-item-subtitle",[e._v(e._s(e.formatBedrag(e.totaal)))])],1),n("v-list-item",[n("v-list-item-title",[e._v("Nieuw saldo")]),n("v-list-item-subtitle",[e._v(e._s(e.formatBedrag(e.persoon.saldo-e.totaal)))])],1)],1),n("v-divider"),n("div",[n("v-btn",{attrs:{color:"success",loading:e.bestellingLaden},on:{click:e.plaatsBestelling}},[n("v-icon",{attrs:{dark:""}},[e._v("mbi-check")])],1),n("v-btn",{attrs:{color:"error",disabled:e.bestellingLaden},on:{click:e.annuleer}},[n("v-icon",{attrs:{dark:""}},[e._v("mbi-close")])],1)],1)],1)},Ee=[],Ae=r["a"].extend({name:"BestellingSamenvatting",props:{bestellingLaden:Boolean,persoon:Object,totaal:Number,plaatsBestelling:Function,annuleer:Function},methods:{formatBedrag:je}}),Ne=Ae,De=n("ce7e"),ze=Object(c["a"])(Ne,Re,Ee,!1,null,"c0655aac",null),Ue=ze.exports;d()(ze,{VBtn:Be["a"],VDivider:De["a"],VIcon:b["a"],VList:g["a"],VListItem:w["a"],VListItemSubtitle:j["b"],VListItemTitle:j["c"]});var We=r["a"].extend({name:"Bestelling",components:{BestellingSamenvatting:Ue,ProductWeergave:Pe,Numpad:be},props:{socCieId:String,bestellingId:{type:String,default:""}},data:function(){return{aantal:"",bestellingLaden:!1,forceBestelling:!1}},created:function(){if(this.$store.commit("setSelectie",this.socCieId),this.bestellingId){var e=this.$store.state.producten;this.$store.commit("setInvoer",Object.entries(this.$store.state.bestelling.bestellingen[this.bestellingId].bestelLijst).map((function(t){var n=Object(ne["a"])(t,2),r=n[0],a=n[1];return{aantal:a,product:e[r]}})))}},computed:{producten:function(){return this.$store.getters.zichtbareProducten},persoon:function(){return this.socCieId?this.$store.state.personen[this.socCieId]:null},totaal:function(){var e=Object.values(this.bestellingInhoud);return ye.apply(void 0,Object(te["a"])(e.map((function(e){return Number(e.product.prijs)*e.aantal}))))},bestellingInhoud:function(){return this.$store.state.invoer.inhoud}},methods:{formatBedrag:je,verwijderInvoer:function(e){this.$store.commit("verwijderInvoer",e)},selecteerInvoer:function(e){this.$store.commit("selecteerInvoer",{product:e,aantal:this.aantal}),this.aantal=""},plaatsBestelling:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.bestellingLaden=!0,t.prev=1,t.next=4,e.$store.dispatch("plaatsBestelling",{inhoud:e.bestellingInhoud,persoon:e.persoon,force:e.forceBestelling});case 4:return e.forceBestelling=!1,t.next=7,e.$store.dispatch("postLogin");case 7:return e.bestellingLaden=!1,e.$store.commit("clearInvoer"),e.$store.commit("setSelectie",null),t.next=12,e.$router.replace("/personen");case 12:t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](1),t.t0 instanceof _e?setTimeout((function(){e.forceBestelling=!0,e.bestellingLaden=!1}),3e3):e.bestellingLaden=!1;case 17:case"end":return t.stop()}}),t,null,[[1,14]])})))()},annuleer:function(){this.$store.commit("clearInvoer"),this.aantal="",this.forceBestelling=!1,this.$store.commit("setSelectie",null),this.$router.replace("/personen")}}}),Je=We,Ke=(n("c97a"),Object(c["a"])(Je,q,ee,!1,null,"7d395a62",null)),Me=Ke.exports;d()(Ke,{VCol:Te["a"],VRow:Ce["a"]});var Ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-main",{staticClass:"login-main"},[n("h1",[e._v("Barsysteem C.S.R.")]),n("p",[e._v("Welkom "),e.vertrouwd?n("span",[e._v("terug")]):e._e(),e._v(" bij het barsysteem, gebruik je stek account om in te loggen.")]),n("v-btn",{on:{click:function(t){return e.$router.push("/auth/csr")}}},[e._v("Login")])],1)],1)},Fe=[],Ze=r["a"].extend({name:"Login",computed:{vertrouwd:function(){return!!this.$store.state.user.locatieToken}},created:function(){this.$store.state.user.tokenData&&this.$router.push("/personen")}}),He=Ze,Xe=(n("bc50"),Object(c["a"])(He,Ge,Fe,!1,null,"c95c3c8a",null)),Ye=Xe.exports;d()(Xe,{VBtn:Be["a"],VContainer:m["a"],VMain:y["a"]});var Qe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-main",{staticClass:"logout-main"},[n("h1",[e._v("Weet je zeker dat je wil uitloggen?")]),n("v-btn",{attrs:{type:"primary"},on:{click:e.logout}},[e._v("Uitloggen")]),n("v-btn",{on:{click:function(t){return e.$router.push("/")}}},[e._v("Terug")])],1)],1)},qe=[],et=r["a"].extend({name:"Logout",methods:{logout:function(){this.$store.commit("setToken",null),this.$router.push("/")}}}),tt=et,nt=(n("4f9a"),Object(c["a"])(tt,Qe,qe,!1,null,"64c190ae",null)),rt=nt.exports;d()(nt,{VBtn:Be["a"],VContainer:m["a"],VMain:y["a"]});var at=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"hello"},[n("Keyboard",{model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),n("LedenTable",{attrs:{zoeken:e.value}})],1)},ot=[],it=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("SimpleKeyboard",{attrs:{modelValue:e.modelValue,"keyboard-class":"full-keyboard"},on:{"update:modelValue":e.emitValue}})},st=[],lt=(n("d2db"),r["a"].extend({name:"Keyboard",model:{prop:"modelValue",event:"update:modelValue"},components:{SimpleKeyboard:ve},props:{modelValue:{type:String}},methods:{emitValue:function(e){var t,n=e;n&&(n=null===(t=n)||void 0===t?void 0:t.toUpperCase());this.$emit("update:modelValue",n)}}})),ct=lt,ut=(n("681b"),Object(c["a"])(ct,it,st,!1,null,null,null)),dt=ut.exports,pt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-data-table",{attrs:{headers:e.headers,items:e.personen,"row-class-name":e.tableRowClassName,"row-key":"socCieId"},on:{"click:row":e.rowClick},scopedSlots:e._u([{key:"item.saldo",fn:function(t){var n=t.item;return[e._v(" "+e._s(e.formatBedrag(n.saldo))+" ")]}}])})},vt=[],ft=(n("466d"),r["a"].extend({name:"LedenTable",props:{zoeken:String},computed:{personen:function(){return this.$store.getters.personenWeergave.filter(this.filterPersoon).slice(0,50)},headers:function(){return[{text:"Bijnaam",value:"bijnaam"},{text:"Naam",value:"naam"},{text:"Saldo",value:"saldo"}]}},methods:{formatBedrag:je,rowClick:function(e){this.$router.push("/invoer/".concat(e.socCieId))},tableRowClassName:function(e){var t=e.row;return t.saldo<0?"error-row":"success-row"},filterPersoon:function(e){return e.bijnaam.toUpperCase().match(this.zoeken)||e.naam.toUpperCase().match(this.zoeken)}}})),mt=ft,ht=n("8fea"),bt=Object(c["a"])(mt,pt,vt,!1,null,"467e284f",null),gt=bt.exports;d()(bt,{VDataTable:ht["a"]});var wt=r["a"].extend({name:"Personen",components:{LedenTable:gt,Keyboard:dt},data:function(){return{value:""}},computed:{upperValue:function(){return this.value.toUpperCase()}},methods:{change:function(e){this.value=e}}}),kt=wt,xt=(n("34c4"),Object(c["a"])(kt,at,ot,!1,null,null,null)),jt=xt.exports,yt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",[n("v-col",{attrs:{span:8}},[n("v-switch",{attrs:{"inactive-text":"Geselecteerde persoon","active-text":"Alle personen"},model:{value:e.zoekInAlles,callback:function(t){e.zoekInAlles=t},expression:"zoekInAlles"}})],1),n("v-col",{attrs:{span:8}},[n("v-date-picker",{attrs:{type:"daterange","popper-class":"bar-datepicker","unlink-panels":"","range-separator":"tot","start-placeholder":"Start datum","end-placeholder":"Eind datum",shortcuts:e.shortcuts},model:{value:e.datum,callback:function(t){e.datum=t},expression:"datum"}})],1),n("v-col",{attrs:{span:4}},[n("v-btn",{attrs:{title:"Filter op specifieke producten",type:e.isIndeterminate?"primary":"default",icon:"el-icon-set-up",size:"medium"},on:{click:function(t){e.productSelectieZichtbaar=!0,e.productSelectieAlle=!1}}},[e._v(" Producten ")]),n("v-dialog",{attrs:{title:"Selecteer producten"},model:{value:e.productSelectieZichtbaar,callback:function(t){e.productSelectieZichtbaar=t},expression:"productSelectieZichtbaar"}},[n("v-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("Alle ")]),n("div",{staticStyle:{margin:"15px 0"}}),n("v-checkbox-group",{on:{change:e.handleCheckedProductenChange},model:{value:e.selectedProducten,callback:function(t){e.selectedProducten=t},expression:"selectedProducten"}},[n("v-row",e._l(e.producten,(function(t){return n("v-col",{key:t.productId,attrs:{span:4}},[n("v-checkbox",{attrs:{label:t.productId}},[e._v(" "+e._s(t.beschrijving)+" ")])],1)})),1)],1)],1)],1),n("v-col",{attrs:{span:4}},[n("v-btn",{attrs:{size:"medium"},on:{click:e.zoeken}},[e._v("Zoeken")])],1),n("v-col",[n("v-data-table",{attrs:{items:e.bestellingen,headers:e.headers}})],1)],1)},Ot=[],_t=r["a"].extend({name:"Bestellingen",computed:{bestellingen:function(){return Object.values(this.$store.state.bestelling.bestellingen)},producten:function(){return Object.values(this.$store.state.producten).filter((function(e){return"0"===e.beheer&&"1"===e.status}))},headers:function(){return[{text:"Naam",value:"persoon"},{text:"Datum en tijd",value:"datum"},{text:"Totaal",value:"bestelTotaal"},{text:"Bestelling",value:"bestelLijst"},{text:"Opties"}]}},data:function(){return{verwijderLaden:{},herstelLaden:{},productSelectieZichtbaar:!1,zoekInAlles:!0,datum:[new Date(+new Date-1296e6),new Date],selectedProducten:[],isIndeterminate:!1,checkAll:!1,shortcuts:[{text:"Afgelopen week",value:function(){var e=new Date,t=new Date;return t.setTime(t.getTime()-6048e5),[t,e]}()},{text:"Laatste 2 weken",value:function(){var e=new Date,t=new Date;return t.setTime(t.getTime()-1296e6),[t,e]}()},{text:"Afgelopen maand",value:function(){var e=new Date,t=new Date;return t.setTime(t.getTime()-2592e6),[t,e]}()},{text:"Laatste 3 maanden",value:function(){var e=new Date,t=new Date;return t.setTime(t.getTime()-7776e6),[t,e]}()}]}},methods:{naamFormatter:function(e){var t;return null===(t=this.getPersoon(e.persoon))||void 0===t?void 0:t.naam},getPersoon:function(e){return this.$store.state.personen[e]},getProduct:function(e){return this.$store.state.producten[e]},getBestelLijstString:function(e){var t=this;return Object.entries(e).map((function(e){var n,r=Object(ne["a"])(e,2),a=r[0],o=r[1];return"".concat(o," ").concat(null===(n=t.getProduct(a))||void 0===n?void 0:n.beschrijving)}))},formatBedrag:je,handleCheckedProductenChange:function(e){var t=e.length;this.checkAll=t===this.producten.length,this.isIndeterminate=t>0&&t<this.producten.length},handleCheckAllChange:function(e){this.selectedProducten=e?this.producten.map((function(e){return e.productId})):[],this.isIndeterminate=!1},handleEdit:function(e,t){this.$router.push("/invoer/".concat(t.persoon,"/bewerken/").concat(t.bestelId))},handleVerwijder:function(e,t){var n=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.verwijderLaden[t.bestelId]=!0,e.prev=1,e.next=4,n.$store.dispatch("verwijderBestelling",t);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e["catch"](1);case 8:delete n.verwijderLaden[t.bestelId];case 9:case"end":return e.stop()}}),e,null,[[1,6]])})))()},handleHerstel:function(e,t){var n=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.herstelLaden[t.bestelId]=!0,e.prev=1,e.next=4,n.$store.dispatch("herstelBestelling",t);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e["catch"](1);case 8:delete n.verwijderLaden[t.bestelId];case 9:case"end":return e.stop()}}),e,null,[[1,6]])})))()},zoeken:function(){var e,t;this.$store.dispatch("fetchBestellingen",{aantal:this.zoekInAlles?"alles":this.$store.state.user.selectie,begin:null===(e=this.datum[0])||void 0===e?void 0:e.toISOString(),eind:null===(t=this.datum[1])||void 0===t?void 0:t.toISOString(),productType:this.selectedProducten})}},created:function(){var e=this;setTimeout((function(){e.$store.dispatch("fetchBestellingen",{aantal:"alles",begin:"",eind:"",productType:[]})}),1e3)}}),Vt=_t,It=(n("e06c"),n("ac7c")),St=n("2e4b"),$t=n("169a"),Bt=n("b73d"),Tt=Object(c["a"])(Vt,yt,Ot,!1,null,null,null),Ct=Tt.exports;d()(Tt,{VBtn:Be["a"],VCheckbox:It["a"],VCol:Te["a"],VDataTable:ht["a"],VDatePicker:St["a"],VDialog:$t["a"],VRow:Ce["a"],VSwitch:Bt["a"]});var Lt=n("852e"),Pt=n.n(Lt),Rt={sameSite:"strict"},Et=function(e){Pt.a.set("token",JSON.stringify(e),Rt)},At=function(){return Pt.a.remove("token",Rt)},Nt=function(){var e=Pt.a.get("token");return e?JSON.parse(e):null},Dt=function(){var e=Nt();return e?new D["Token"](W,e):null},zt=function(e){return null==e?null:new D["Token"](W,e)},Ut={sameSite:"strict",expires:new Date(+new Date+864e8)},Wt=function(e){Pt.a.set("locatie-token",JSON.stringify(e),Ut)},Jt=function(){Pt.a.remove("locatie-token",Ut)},Kt=function(){var e=Pt.a.get("locatie-token");return e?JSON.parse(e):null},Mt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v("Welkom in het bar systeem! "+e._s(e.profielNaam))]),e.isAdmin?n("div",[e.vertrouwd?n("div",[n("p",[e._v("Deze locatie is vertrouwd: "+e._s(e.vertrouwd.naam))]),n("v-btn",{attrs:{color:"primary"},on:{click:e.stopVertrouwen}},[e._v(" Deze locatie niet langer vertrouwen. ")])],1):n("div",[n("p",[e._v(" Door een locatie te vertrouwen wordt het mogelijk voor alle leden om in te loggen in het bar systeem. Gebruik deze functie alleen op vertrouwde plekken. ")]),n("p",[n("v-text-field",{attrs:{label:"Naam van deze locatie"},model:{value:e.naam,callback:function(t){e.naam=t},expression:"naam"}}),n("v-btn",{attrs:{color:"primary"},on:{click:e.vertrouw}},[e._v("Vertrouw deze locatie")])],1)])]):e._e()])},Gt=[],Ft=(n("caad"),n("2532"),r["a"].extend({name:"PostLogin",data:function(){return{naam:""}},computed:{profielNaam:function(){var e,t;return null!==(e=null===(t=this.$store.state.user.profiel)||void 0===t?void 0:t.displayName)&&void 0!==e?e:""},vertrouwd:function(){return this.$store.state.user.locatieToken},isAdmin:function(){var e,t;return null!==(e=null===(t=this.$store.state.user.profiel)||void 0===t?void 0:t.scopes.includes("BAR:TRUST"))&&void 0!==e&&e}},methods:{vertrouw:function(){this.$store.dispatch("vertrouwLocatie",this.naam)},stopVertrouwen:function(){this.$store.commit("setLocatieToken",null)}}})),Zt=Ft,Ht=Object(c["a"])(Zt,Mt,Gt,!1,null,"77ce011b",null),Xt=Ht.exports;d()(Ht,{VBtn:Be["a"],VTextField:de["a"]}),r["a"].use(E["a"]);var Yt=[{path:"/",name:"Home",component:Ye},{path:"/personen",name:"Persoonselectie",component:jt},{path:"/invoer/:socCieId",name:"Invoer",component:Me,props:!0},{path:"/invoer/:socCieId/bewerken/:bestellingId",name:"Invoer bewerken",component:Me,props:!0},{path:"/bestellingen",name:"Bestellingen",component:Ct},{path:"/auth/csr",name:"Authorize",component:G},{path:"/auth/callback",name:"AuthCallback",component:Q},{path:"/auth/logout",name:"Logout",component:rt},{path:"/auth/post-login",name:"Welcome",component:Xt}],Qt=new E["a"]({mode:"history",routes:Yt});Qt.beforeEach((function(e,t,n){if("/"!==e.path&&!e.path.startsWith("/auth")){var r=Dt();if(!r)return void n({path:"/"})}n()}));var qt=Qt,en=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=Dt(),n){e.next=5;break}return e.next=4,qt.push("/auth/logout");case 4:throw new Error("Geen token");case 5:return e.prev=5,e.next=8,R()(n.sign(Object(L["a"])(Object(L["a"])({},t),{},{headers:Object(L["a"])(Object(L["a"])({},t.headers),{},{"Content-Type":"application/json","X-Bar-Token":Kt()}),url:"https://csrdelft.nl"+t.url})));case 8:return r=e.sent,e.abrupt("return",r.data);case 12:if(e.prev=12,e.t0=e["catch"](5),!e.t0.response||401!==e.t0.response.status){e.next=18;break}return e.next=17,qt.push("/auth/logout");case 17:throw new Error("Niet ingelogd!");case 18:throw new Error(e.t0.message);case 19:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t){return e.apply(this,arguments)}}(),tn=function(e){return e},nn=tn({state:function(){return{bestellingen:{}}},mutations:{setBestellingen:function(e,t){e.bestellingen=Object.fromEntries(Object.values(t).map((function(e){return[e.bestelId,e]})))},updateBestelling:function(e,t){e.bestellingen[t.bestelId]=t}},actions:{fetchBestellingen:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.state,n.next=3,en({url:"/api/v3/bar/laadLaatste",method:"POST",data:JSON.stringify(t)});case 3:r.bestellingen=n.sent;case 4:case"end":return n.stop()}}),n)})))()},verwijderBestelling:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,n.next=3,en({url:"/api/v3/bar/verwijderBestelling",method:"POST",data:JSON.stringify({verwijderBestelling:t})});case 3:if(a=n.sent,a){n.next=6;break}throw new Error("Verwijderen van bestelling mislukt");case 6:r("updateBestelling",Object(L["a"])(Object(L["a"])({},t),{},{deleted:"1"}));case 7:case"end":return n.stop()}}),n)})))()},herstelBestelling:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,n.next=3,en({url:"/api/v3/bar/undoVerwijderBestelling",method:"POST",data:JSON.stringify({undoVerwijderBestelling:t})});case 3:if(a=n.sent,a){n.next=6;break}throw new Error("Herstellen van bestelling mislukt");case 6:r("updateBestelling",Object(L["a"])(Object(L["a"])({},t),{},{deleted:"0"}));case 7:case"end":return n.stop()}}),n)})))()}},getters:{}}),rn=function(e){return e},an=rn({state:function(){return{inhoud:{}}},mutations:{setInvoer:function(e,t){e.inhoud=Object.fromEntries(Object.values(t).map((function(e){return[e.product.productId,e]})))},selecteerInvoer:function(e,t){var n=t.product,r=t.aantal;n.productId in e.inhoud||(e.inhoud[n.productId]={product:n,aantal:0}),e.inhoud[n.productId].aantal+=Number(r)||1,0===e.inhoud[n.productId].aantal&&delete e.inhoud[n.productId]},verwijderInvoer:function(e,t){delete e.inhoud[t]},clearInvoer:function(e){e.inhoud={}}},actions:{plaatsBestelling:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i,s,l,c,u,d,p,v,f,m,h;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.state,a=e.rootGetters,o=t.oudeInhoud,i=t.force,s=void 0!==i&&i,l=s,c=a.huidigePersoon,u=Oe(c),d=ye.apply(void 0,Object(te["a"])(Object.values(r.inhoud).map((function(e){return e.aantal*Number(e.product.prijs)})))),o?(v=ye.apply(void 0,Object(te["a"])(Object.values(o).map((function(e){return e.aantal*Number(e.product.prijs)})))),p=c.saldo+v-d<0):p=c.saldo-d<0,(d<=0||"S_NOBODY"===c.status)&&(p=!1),f=0===Object.values(r.inhoud).length,!u||!p){n.next=13;break}throw new Error("Oudleden kunnen niet rood staan, inleg vereist!");case 13:if(!c||f){n.next=26;break}if(l||!p){n.next=18;break}throw new _e("Laat lid inleggen. Saldo wordt negatief.");case 18:return m={persoon:c,bestelTotaal:d,bestelLijst:Object.fromEntries(Object.values(r.inhoud).map((function(e){return[e.product.productId,e.aantal]}))),oudeBestelling:o},n.next=21,en({url:"/api/v3/bar/bestelling",method:"POST",data:{bestelling:JSON.stringify(m)}});case 21:if(h=n.sent,h){n.next=24;break}throw new Error('Er ging iets mis! "'.concat(h,'"'));case 24:n.next=28;break;case 26:if(!f){n.next=28;break}throw new Error("Geen bestelling ingevoerd!");case 28:case"end":return n.stop()}}),n)})))()}},getters:{}}),on=function(e){return e},sn=on({state:function(){return{profiel:null,tokenData:null,selectie:null,locatieToken:null}},getters:{token:function(e){return zt(e.tokenData)},huidigePersoon:function(e,t,n){return e.selectie?n.personen[e.selectie]:null}},mutations:{setToken:function(e,t){e.tokenData=t},setLocatieToken:function(e,t){e.locatieToken=t},setProfiel:function(e,t){e.profiel=t},setSelectie:function(e,t){e.selectie=t}},actions:{fetchProfiel:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,en({url:"/api/v3/profiel",method:"GET"});case 3:r=t.sent,n("setProfiel",r);case 5:case"end":return t.stop()}}),t)})))()}}});r["a"].use(C["a"]);var ln=function(e,t){return function(n){var r=Nt();r&&n.commit(e,r);var a=Kt();a&&n.commit(t,a),n.subscribe((function(n){n.type===e&&(n.payload?Et(n.payload):At()),n.type===t&&(n.payload?Wt(n.payload):Jt())}))}},cn=new C["a"].Store({devtools:!0,plugins:[ln("setToken","setLocatieToken")],state:function(){return{profiel:null,personen:{},producten:{}}},getters:{zichtbareProducten:function(e){return Object.values(e.producten).filter((function(e){return"0"===e.beheer&&"1"===e.status}))},personenWeergave:function(e){return Object.values(e.personen).filter((function(e){return"0"===e.deleted})).sort((function(e,t){return t.recent-e.recent}))}},mutations:{setPersonen:function(e,t){e.personen=t},setProducten:function(e,t){e.producten=t}},actions:{listUsers:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,en({url:"/api/v3/bar/personen",method:"POST"});case 3:r=t.sent,a=Object.values(r),o=Object.fromEntries(a.map((function(e){return[e.socCieId,e]}))),n("setPersonen",o);case 7:case"end":return t.stop()}}),t)})))()},listProducten:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,en({url:"/api/v3/bar/producten",method:"POST"});case 3:r=t.sent,a=Object.values(r),o=Object.fromEntries(a.map((function(e){return[e.productId,e]}))),n("setProducten",o);case 7:case"end":return t.stop()}}),t)})))()},postLogin:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.dispatch,t.next=3,n("fetchProfiel");case 3:return t.next=5,n("listUsers");case 5:return t.next=7,n("listProducten");case 7:case"end":return t.stop()}}),t)})))()},vertrouwLocatie:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,n.next=3,en({url:"/api/v3/bar/trust",method:"POST",data:JSON.stringify({naam:t})});case 3:a=n.sent,r("setLocatieToken",a);case 5:case"end":return n.stop()}}),n)})))()}},modules:{bestelling:nn,invoer:an,user:sn}});r["a"].config.productionTip=!1,new r["a"]({vuetify:T,store:cn,router:qt,render:function(e){return e($)}}).$mount("#app")},dad7:function(e,t,n){},dfa6:function(e,t,n){},e06c:function(e,t,n){"use strict";n("e1c8")},e1c8:function(e,t,n){},f0c0:function(e,t,n){},fb94:function(e,t,n){}});
//# sourceMappingURL=app.9490fe0d.js.map