(function(e){function t(t){for(var r,c,u=t[0],l=t[1],i=t[2],s=0,b=[];s<u.length;s++)c=u[s],Object.prototype.hasOwnProperty.call(o,c)&&o[c]&&b.push(o[c][0]),o[c]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);d&&d(t);while(b.length)b.shift()();return a.push.apply(a,i||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,c=1;c<n.length;c++){var l=n[c];0!==o[l]&&(r=!1)}r&&(a.splice(t--,1),e=u(u.s=n[0]))}return e}var r={},o={app:0},a=[];function c(e){return u.p+"js/"+({about:"about"}[e]||e)+"."+{about:"2d2b98c8"}[e]+".js"}function u(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(e){var t=[],n=o[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise((function(t,r){n=o[e]=[t,r]}));t.push(n[2]=r);var a,l=document.createElement("script");l.charset="utf-8",l.timeout=120,u.nc&&l.setAttribute("nonce",u.nc),l.src=c(e);var i=new Error;a=function(t){l.onerror=l.onload=null,clearTimeout(s);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;i.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",i.name="ChunkLoadError",i.type=r,i.request=a,n[1](i)}o[e]=void 0}};var s=setTimeout((function(){a({type:"timeout",target:l})}),12e4);l.onerror=l.onload=a,document.head.appendChild(l)}return Promise.all(t)},u.m=e,u.c=r,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)u.d(n,r,function(t){return e[t]}.bind(null,r));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/",u.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],i=l.push.bind(l);l.push=t,l=l.slice();for(var s=0;s<l.length;s++)t(l[s]);var d=i;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"00a4":function(e,t,n){},1:function(e,t){},"156d":function(e,t,n){"use strict";n("58d8")},"58d8":function(e,t,n){},"592e":function(e,t,n){"use strict";n("5dfe")},"5dba":function(e,t,n){"use strict";n("9b67")},"5dfe":function(e,t,n){},"5fe6":function(e,t,n){},"6d0f":function(e,t,n){"use strict";n("5fe6")},"88c1":function(e,t,n){"use strict";n("b04c")},"8c09":function(e,t,n){"use strict";n("c417")},"9b67":function(e,t,n){},"9dde":function(e,t,n){"use strict";n("aade")},"9e68":function(e,t,n){"use strict";n("cb3a")},aade:function(e,t,n){},b04c:function(e,t,n){},b37e:function(e,t,n){},c417:function(e,t,n){},cb3a:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),o=n("7864"),a=n("21aa"),c=n.n(a),u=Object(r["n"])(" Persoonselectie "),l=Object(r["n"])(" Invoer "),i=Object(r["n"])(" Bestellingen "),s=Object(r["n"])(" Logout "),d={class:"klok"},b={key:0,class:"locatie"};function f(e,t,n,o,a,c){var f=Object(r["O"])("el-menu-item"),p=Object(r["O"])("Clock"),O=Object(r["O"])("el-menu"),j=Object(r["O"])("PersoonSelectie"),m=Object(r["O"])("el-affix"),h=Object(r["O"])("el-header"),g=Object(r["O"])("router-view"),v=Object(r["O"])("el-main"),k=Object(r["O"])("el-container"),w=Object(r["P"])("loading");return Object(r["eb"])((Object(r["F"])(),Object(r["k"])(k,null,{default:Object(r["db"])((function(){return[e.loggedIn?(Object(r["F"])(),Object(r["k"])(h,{key:0,height:"auto"},{default:Object(r["db"])((function(){return[Object(r["o"])(m,null,{default:Object(r["db"])((function(){return[Object(r["o"])(O,{"default-active":e.currentRoute.fullPath,mode:"horizontal",router:!0},{default:Object(r["db"])((function(){return[Object(r["o"])(f,{index:"/personen"},{default:Object(r["db"])((function(){return[u]})),_:1}),Object(r["o"])(f,{disabled:null==e.bestellingUrl,index:e.bestellingUrl},{default:Object(r["db"])((function(){return[l]})),_:1},8,["disabled","index"]),Object(r["o"])(f,{index:"/bestellingen"},{default:Object(r["db"])((function(){return[i]})),_:1}),Object(r["o"])(f,{index:"/auth/logout"},{default:Object(r["db"])((function(){return[s]})),_:1}),Object(r["o"])("span",d,[Object(r["o"])(p)]),e.vertrouwd?(Object(r["F"])(),Object(r["k"])("span",b,Object(r["S"])(e.vertrouwd.naam),1)):Object(r["l"])("",!0)]})),_:1},8,["default-active"]),Object(r["o"])(j)]})),_:1})]})),_:1})):Object(r["l"])("",!0),Object(r["o"])(v,null,{default:Object(r["db"])((function(){return[Object(r["o"])(g)]})),_:1})]})),_:1},512)),[[w,e.loading,void 0,{fullscreen:!0,lock:!0}]])}var p=n("1da1"),O=(n("96cf"),Object(r["hb"])("data-v-de768380")),j=O((function(e,t,n,o,a,c){return Object(r["F"])(),Object(r["k"])("h2",{class:"persoon-selectie",style:{background:e.kleur}},Object(r["S"])(e.naam),5)})),m=(n("a9e3"),Object(r["p"])({name:"PersoonSelectie",computed:{naam:function(){var e=this.$store.state.user.selectie;if(!e)return"Geen persoon geselecteerd";var t=this.$store.state.personen[e];return t?t.naam:"Laden"},kleur:function(){var e=this.$store.state.user.selectie;if(!e)return"#bce8f1";var t=this.$store.state.personen[e];return t?Number(t.saldo)<0?"#f2dede":"#f0f9eb":""}}}));n("8c09");m.render=j,m.__scopeId="data-v-de768380";var h=m,g=Object(r["hb"])("data-v-d229f462"),v=g((function(e,t,n,o,a,c){return Object(r["F"])(),Object(r["k"])("span",null,Object(r["S"])(e.tijd),1)})),k=Object(r["p"])({name:"Clock",data:function(){return{date:new Date}},created:function(){var e=this;setInterval((function(){e.date=new Date}),1e3)},computed:{tijd:function(){return this.date.toLocaleTimeString("nl-NL")}}});k.render=v,k.__scopeId="data-v-d229f462";var w=k,y=Object(r["p"])({name:"App",components:{Clock:w,PersoonSelectie:h},data:function(){return{loading:!0}},computed:{loggedIn:function(){return Boolean(this.$store.getters.token)},currentRoute:function(){return this.$router.currentRoute.value},bestellingUrl:function(){var e=this.$store.state.user.selectie;return e?"/invoer/".concat(e):null},vertrouwd:function(){return this.$store.state.user.locatieToken}},created:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.loggedIn){t.next=9;break}return t.prev=1,t.next=4,e.$store.dispatch("postLogin");case 4:return t.prev=4,e.loading=!1,t.finish(4);case 7:t.next=10;break;case 9:e.loading=!1;case 10:case"end":return t.stop()}}),t,null,[[1,,4,7]])})))()}});n("5dba");y.render=f;var S=y,I=(n("d3b7"),n("3ca3"),n("ddb0"),n("2ca0"),n("6c02")),_=Object(r["hb"])("data-v-77598f7a"),x=_((function(e,t,n,o,a,c){var u=Object(r["P"])("loading");return Object(r["eb"])((Object(r["F"])(),Object(r["k"])("div",{"element-loading-text":e.msg},null,8,["element-loading-text"])),[[u,e.loading,void 0,{fullscreen:!0,lock:!0}]])})),C=n("a981"),B=n.n(C),V=new B.a({clientId:"bar",authorizationUri:"".concat("https://csrdelft.nl","/authorize"),accessTokenUri:"".concat("https://csrdelft.nl","/api/v3/token"),redirectUri:"".concat(window.location.origin,"/auth/callback"),scopes:["BAR:NORMAAL","BAR:BEHEER","BAR:TRUST"]}),$=V,T=Object(r["p"])({name:"Authorize",data:function(){return{msg:"Wachten op autorisatie",loading:!1}},methods:{setLoading:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.loading=!1,t.msg=e,n.next=4,t.$nextTick();case 4:t.loading=!0;case 5:case"end":return n.stop()}}),n)})))()}},created:function(){var e=this;this.$store.state.user.tokenData?this.$router.push("/auth/post-login"):(window.open($.token.getUri()),this.loading=!0,window.oauth2Callback=function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.setLoading("Token laden...");case 2:return t.prev=2,t.next=5,$.token.getToken(n);case 5:return r=t.sent,t.next=8,e.$store.commit("setToken",r.data);case 8:t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](2),e.$notify({message:t.t0.message});case 13:return t.next=15,e.setLoading("Profiel laden...");case 15:return t.next=17,e.$store.dispatch("postLogin");case 17:return e.loading=!1,t.next=20,e.$router.push("/auth/post-login");case 20:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}())}});T.render=x,T.__scopeId="data-v-77598f7a";var L=T,P=Object(r["hb"])("data-v-90c4c232"),R=P((function(e,t,n,o,a,c){return Object(r["F"])(),Object(r["k"])("div",null,"Redirecting back")})),N=Object(r["p"])({name:"AuthCallback",created:function(){window.opener.oauth2Callback(window.location),window.close()}});N.render=R,N.__scopeId="data-v-90c4c232";var F=N,A=Object(r["hb"])("data-v-4cd9c8c6");Object(r["I"])("data-v-4cd9c8c6");var U={key:0},z=Object(r["o"])("span",{class:"el-icon-close"},null,-1),D=Object(r["o"])("span",null," Huidig saldo: ",-1),E={style:{float:"right"}},G=Object(r["n"])(" Totaal bestelling: "),M={style:{float:"right"}},W=Object(r["n"])(" Nieuw Saldo: "),J={style:{float:"right"}};Object(r["G"])();var K=A((function(e,t,n,o,a,c){var u=Object(r["O"])("el-col"),l=Object(r["O"])("el-row"),i=Object(r["O"])("ProductWeergave"),s=Object(r["O"])("Numpad"),d=Object(r["O"])("BestellingSamenvatting"),b=Object(r["O"])("el-descriptions-item"),f=Object(r["O"])("el-descriptions"),p=Object(r["O"])("el-divider"),O=Object(r["O"])("el-button");return e.persoon?(Object(r["F"])(),Object(r["k"])("div",U,[Object(r["o"])(l,{gutter:20},{default:A((function(){return[Object(r["o"])(u,{span:18},{default:A((function(){return[Object(r["o"])(l,{class:"bestelling-inhoud"},{default:A((function(){return[(Object(r["F"])(!0),Object(r["k"])(r["b"],null,Object(r["M"])(e.bestellingInhoud,(function(t){return Object(r["F"])(),Object(r["k"])(u,{span:6,key:t.product.productId},{default:A((function(){return[Object(r["o"])("div",{class:"product",onClick:function(n){return e.verwijderInvoer(t.product.productId)}},[Object(r["n"])(Object(r["S"])(t.aantal)+" "+Object(r["S"])(t.product.beschrijving)+" ",1),z],8,["onClick"])]})),_:2},1024)})),128))]})),_:1}),Object(r["o"])(i,{producten:e.producten,onSelecteer:e.selecteerInvoer},null,8,["producten","onSelecteer"])]})),_:1}),Object(r["o"])(u,{span:6},{default:A((function(){return[Object(r["o"])(s,{"default-value":"1",modelValue:e.aantal,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.aantal=t})},null,8,["modelValue"]),Object(r["o"])(d,{"bestelling-laden":e.bestellingLaden,persoon:e.persoon,totaal:e.totaal,annuleer:e.annuleer,plaatsBestelling:e.plaatsBestelling},null,8,["bestelling-laden","persoon","totaal","annuleer","plaatsBestelling"]),Object(r["o"])(f,{column:1,border:""},{default:A((function(){return[Object(r["o"])(b,{label:"Huidig saldo"},{default:A((function(){return[Object(r["n"])(Object(r["S"])(e.formatBedrag(e.persoon.saldo)),1)]})),_:1}),Object(r["o"])(b,{label:"Totaal bestelling"},{default:A((function(){return[Object(r["n"])(Object(r["S"])(e.formatBedrag(e.totaal)),1)]})),_:1}),Object(r["o"])(b,{label:"Nieuw saldo"},{default:A((function(){return[Object(r["n"])(Object(r["S"])(e.formatBedrag(e.persoon.saldo-e.totaal)),1)]})),_:1})]})),_:1}),Object(r["o"])(p),Object(r["o"])("div",null,[D,Object(r["o"])("span",E,Object(r["S"])(e.formatBedrag(e.persoon.saldo)),1)]),Object(r["o"])(p),Object(r["o"])("span",null,[G,Object(r["o"])("span",M,Object(r["S"])(e.formatBedrag(e.totaal)),1)]),Object(r["o"])(p),Object(r["o"])("span",null,[W,Object(r["o"])("span",J,Object(r["S"])(e.formatBedrag(e.persoon.saldo-e.totaal)),1)]),Object(r["o"])(p),Object(r["o"])("div",null,[Object(r["o"])(O,{type:"success",icon:"el-icon-check",onClick:e.plaatsBestelling,loading:e.bestellingLaden},null,8,["onClick","loading"]),Object(r["o"])(O,{type:"danger",icon:"el-icon-close",onClick:e.annuleer,disabled:e.bestellingLaden},null,8,["onClick","disabled"])])]})),_:1})]})),_:1})])):Object(r["l"])("",!0)})),H=n("2909"),Z=n("3835"),X=(n("d81d"),n("4fad"),n("07ac"),n("ac1f"),n("5319"),Object(r["hb"])("data-v-52b106c5")),Y=X((function(e,t,n,o,a,c){var u=Object(r["O"])("SimpleKeyboard");return Object(r["F"])(),Object(r["k"])(u,{layout:["7 8 9","4 5 6","1 2 3","{bksp} 0 {neg}"],display:{"{bksp}":"<","{neg}":"-"},"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.$emit("update:modelValue",t)}),modelValue:e.modelValue,defaultValue:e.defaultValue},null,8,["modelValue","defaultValue"])})),q={class:"simple-keyboard-input"};function Q(e,t,n,o,a,c){var u=Object(r["O"])("el-input");return Object(r["F"])(),Object(r["k"])(r["b"],null,[Object(r["o"])("div",q,[Object(r["o"])(u,{modelValue:e.modelValue,placeholder:e.defaultValue,"onUpdate:modelValue":e.onChange},null,8,["modelValue","placeholder","onUpdate:modelValue"])]),Object(r["o"])("div",{class:e.keyboardClass},null,2)],64)}n("fb6a");var ee=n("dd7f"),te=n.n(ee),ne=Object(r["p"])({name:"SimpleKeyboard",emits:["update:modelValue","keypress"],props:{layout:{default:function(){return["Q W E R T Y U I O P {bksp}","A S D F G H J K L {leeg}","Z X C V B N M {space}"]},type:Array},display:{default:function(){return{"{leeg}":"Leeg","{space}":"Spatie","{bksp}":"Delete"}},type:Object},keyboardClass:{default:"simple-keyboard",type:String},modelValue:{type:String},defaultValue:{default:"",type:String}},data:function(){return{keyboard:null}},mounted:function(){this.keyboard=new te.a(this.keyboardClass,{onChange:this.onChange,onKeyPress:this.onKeyPress,display:this.display,theme:"",layout:{default:this.layout}})},methods:{onChange:function(e){this.$emit("update:modelValue",e)},onKeyPress:function(e){this.$emit("keypress",e),"{shift}"!==e&&"{lock}"!==e||this.handleShift(),"{leeg}"===e&&this.handleLeeg(),"{neg}"===e&&this.handleNeg()},handleNeg:function(){this.modelValue&&this.modelValue.startsWith("-")?this.onChange(this.modelValue.slice(1)):""===this.modelValue?this.onChange("-1"):this.onChange("-".concat(this.modelValue))},handleLeeg:function(){this.keyboard&&this.keyboard.setInput("")},handleShift:function(){var e,t=null===(e=this.keyboard)||void 0===e?void 0:e.options.layoutName,n="default"===t?"shift":"default";this.keyboard&&this.keyboard.setOptions({layoutName:n})}},watch:{modelValue:function(e){this.keyboard&&this.keyboard.setInput(e)}}});n("88c1");ne.render=Q;var re=ne,oe=Object(r["p"])({name:"Numpad",components:{SimpleKeyboard:re},emits:["update:modelValue"],props:{modelValue:String,defaultValue:{default:"",type:String}}});oe.render=Y,oe.__scopeId="data-v-52b106c5";var ae=oe,ce=n("d4ec"),ue=n("262e"),le=n("2caf"),ie=n("9072"),se=(n("99af"),function(e){var t=String(Math.abs(e%100));if("0"===t?t="00":Number(t)<10&&(t="0".concat(t)),e>-100&&e<0)return"€-0,".concat(t);var n="€".concat((e-e%100)/100,",").concat(t);return n.replace("€-","-€")}),de=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return e+t}),0)},be=function(e){return"S_LID"!==e.status&&"S_GASTLID"!==e.status&&"S_NOVIET"!==e.status},fe=function(e){Object(ue["a"])(n,e);var t=Object(le["a"])(n);function n(){return Object(ce["a"])(this,n),t.apply(this,arguments)}return n}(Object(ie["a"])(Error)),pe=Object(r["hb"])("data-v-3fbb7f4d"),Oe=pe((function(e,t,n,o,a,c){var u=Object(r["O"])("el-button"),l=Object(r["O"])("el-col"),i=Object(r["O"])("el-row");return Object(r["F"])(),Object(r["k"])(i,{gutter:20},{default:pe((function(){return[(Object(r["F"])(!0),Object(r["k"])(r["b"],null,Object(r["M"])(e.producten,(function(t){return Object(r["F"])(),Object(r["k"])(l,{span:4,key:t.productId},{default:pe((function(){return[Object(r["o"])(u,{class:"btn-product",onClick:function(n){return e.$emit("selecteer",t)}},{default:pe((function(){return[Object(r["o"])("div",null,Object(r["S"])(t.beschrijving),1),Object(r["o"])("div",null,Object(r["S"])(e.formatBedrag(t.prijs)),1)]})),_:2},1032,["onClick"])]})),_:2},1024)})),128))]})),_:1})})),je=Object(r["p"])({name:"ProductWeergave",props:{producten:{type:Array,default:function(){return[]}}},methods:{formatBedrag:se}});n("9e68");je.render=Oe,je.__scopeId="data-v-3fbb7f4d";var me=je,he=Object(r["hb"])("data-v-c586e76a");Object(r["I"])("data-v-c586e76a");var ge=Object(r["o"])("span",null," Huidig saldo: ",-1),ve={style:{float:"right"}},ke=Object(r["n"])(" Totaal bestelling: "),we={style:{float:"right"}},ye=Object(r["n"])(" Nieuw Saldo: "),Se={style:{float:"right"}};Object(r["G"])();var Ie=he((function(e,t,n,o,a,c){var u=Object(r["O"])("el-descriptions-item"),l=Object(r["O"])("el-descriptions"),i=Object(r["O"])("el-divider"),s=Object(r["O"])("el-button");return Object(r["F"])(),Object(r["k"])(r["b"],null,[Object(r["o"])(l,{column:1,border:""},{default:he((function(){return[Object(r["o"])(u,{label:"Huidig saldo"},{default:he((function(){return[Object(r["n"])(Object(r["S"])(e.formatBedrag(e.persoon.saldo)),1)]})),_:1}),Object(r["o"])(u,{label:"Totaal bestelling"},{default:he((function(){return[Object(r["n"])(Object(r["S"])(e.formatBedrag(e.totaal)),1)]})),_:1}),Object(r["o"])(u,{label:"Nieuw saldo"},{default:he((function(){return[Object(r["n"])(Object(r["S"])(e.formatBedrag(e.persoon.saldo-e.totaal)),1)]})),_:1})]})),_:1}),Object(r["o"])(i),Object(r["o"])("div",null,[ge,Object(r["o"])("span",ve,Object(r["S"])(e.formatBedrag(e.persoon.saldo)),1)]),Object(r["o"])(i),Object(r["o"])("span",null,[ke,Object(r["o"])("span",we,Object(r["S"])(e.formatBedrag(e.totaal)),1)]),Object(r["o"])(i),Object(r["o"])("span",null,[ye,Object(r["o"])("span",Se,Object(r["S"])(e.formatBedrag(e.persoon.saldo-e.totaal)),1)]),Object(r["o"])(i),Object(r["o"])("div",null,[Object(r["o"])(s,{type:"success",icon:"el-icon-check",onClick:e.plaatsBestelling,loading:e.bestellingLaden},null,8,["onClick","loading"]),Object(r["o"])(s,{type:"danger",icon:"el-icon-close",onClick:e.annuleer,disabled:e.bestellingLaden},null,8,["onClick","disabled"])])],64)})),_e=Object(r["p"])({name:"BestellingSamenvatting",props:{bestellingLaden:Boolean,persoon:Object,totaal:Number,plaatsBestelling:Function,annuleer:Function},methods:{formatBedrag:se}});_e.render=Ie,_e.__scopeId="data-v-c586e76a";var xe=_e,Ce=Object(r["p"])({name:"Bestelling",components:{BestellingSamenvatting:xe,ProductWeergave:me,Numpad:ae},props:{socCieId:String,bestellingId:{type:String,default:""}},data:function(){return{aantal:"",bestellingLaden:!1,forceBestelling:!1}},created:function(){if(this.$store.commit("setSelectie",this.socCieId),this.bestellingId){var e=this.$store.state.producten;this.$store.commit("setInvoer",Object.entries(this.$store.state.bestelling.bestellingen[this.bestellingId].bestelLijst).map((function(t){var n=Object(Z["a"])(t,2),r=n[0],o=n[1];return{aantal:o,product:e[r]}})))}},computed:{producten:function(){return this.$store.getters.zichtbareProducten},persoon:function(){return this.socCieId?this.$store.state.personen[this.socCieId]:null},totaal:function(){var e=Object.values(this.bestellingInhoud);return de.apply(void 0,Object(H["a"])(e.map((function(e){return Number(e.product.prijs)*e.aantal}))))},bestellingInhoud:function(){return this.$store.state.invoer.inhoud}},methods:{formatBedrag:se,verwijderInvoer:function(e){this.$store.commit("verwijderInvoer",e)},selecteerInvoer:function(e){this.$store.commit("selecteerInvoer",{product:e,aantal:this.aantal}),this.aantal=""},plaatsBestelling:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.bestellingLaden=!0,t.prev=1,t.next=4,e.$store.dispatch("plaatsBestelling",{inhoud:e.bestellingInhoud,persoon:e.persoon,force:e.forceBestelling});case 4:return e.forceBestelling=!1,t.next=7,e.$store.dispatch("postLogin");case 7:return e.bestellingLaden=!1,e.$store.commit("clearInvoer"),e.$store.commit("setSelectie",null),t.next=12,e.$router.replace("/personen");case 12:t.next=18;break;case 14:t.prev=14,t.t0=t["catch"](1),t.t0 instanceof fe?setTimeout((function(){e.forceBestelling=!0,e.bestellingLaden=!1}),3e3):e.bestellingLaden=!1,e.$message.error(t.t0.message);case 18:case"end":return t.stop()}}),t,null,[[1,14]])})))()},annuleer:function(){this.$store.commit("clearInvoer"),this.aantal="",this.forceBestelling=!1,this.$store.commit("setSelectie",null),this.$router.replace("/personen")}}});n("156d");Ce.render=K,Ce.__scopeId="data-v-4cd9c8c6";var Be=Ce,Ve=Object(r["hb"])("data-v-1532abd1");Object(r["I"])("data-v-1532abd1");var $e=Object(r["o"])("h1",null,"Barsysteem C.S.R.",-1),Te=Object(r["n"])("Welkom "),Le={key:0},Pe=Object(r["n"])(" bij het barsysteem, gebruik je stek account om in te loggen."),Re=Object(r["n"])("Login");Object(r["G"])();var Ne=Ve((function(e,t,n,o,a,c){var u=Object(r["O"])("el-button"),l=Object(r["O"])("el-main"),i=Object(r["O"])("el-container");return Object(r["F"])(),Object(r["k"])(i,null,{default:Ve((function(){return[Object(r["o"])(l,{class:"login-main"},{default:Ve((function(){return[$e,Object(r["o"])("p",null,[Te,e.vertrouwd?(Object(r["F"])(),Object(r["k"])("span",Le,"terug")):Object(r["l"])("",!0),Pe]),Object(r["o"])(u,{onClick:t[1]||(t[1]=function(t){return e.$router.push("/auth/csr")})},{default:Ve((function(){return[Re]})),_:1})]})),_:1})]})),_:1})})),Fe=Object(r["p"])({name:"Login",computed:{vertrouwd:function(){return!!this.$store.state.user.locatieToken}},created:function(){this.$store.state.user.tokenData&&this.$router.push("/personen")}});n("6d0f");Fe.render=Ne,Fe.__scopeId="data-v-1532abd1";var Ae=Fe,Ue=Object(r["hb"])("data-v-7d6200a9");Object(r["I"])("data-v-7d6200a9");var ze=Object(r["o"])("h1",null,"Weet je zeker dat je wil uitloggen?",-1),De=Object(r["n"])("Uitloggen"),Ee=Object(r["n"])("Terug");Object(r["G"])();var Ge=Ue((function(e,t,n,o,a,c){var u=Object(r["O"])("el-button"),l=Object(r["O"])("el-main"),i=Object(r["O"])("el-container");return Object(r["F"])(),Object(r["k"])(i,null,{default:Ue((function(){return[Object(r["o"])(l,{class:"logout-main"},{default:Ue((function(){return[ze,Object(r["o"])(u,{onClick:e.logout,type:"primary"},{default:Ue((function(){return[De]})),_:1},8,["onClick"]),Object(r["o"])(u,{onClick:t[1]||(t[1]=function(t){return e.$router.push("/")})},{default:Ue((function(){return[Ee]})),_:1})]})),_:1})]})),_:1})})),Me=Object(r["p"])({name:"Logout",methods:{logout:function(){this.$store.commit("setToken",null),this.$router.push("/")}}});n("592e");Me.render=Ge,Me.__scopeId="data-v-7d6200a9";var We=Me,Je={class:"hello"};function Ke(e,t,n,o,a,c){var u=Object(r["O"])("Keyboard"),l=Object(r["O"])("LedenTable");return Object(r["F"])(),Object(r["k"])("div",Je,[Object(r["o"])(u,{modelValue:e.value,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.value=t}),modelModifiers:{uppercase:!0}},null,8,["modelValue"]),Object(r["o"])(l,{zoeken:e.value},null,8,["zoeken"])])}function He(e,t,n,o,a,c){var u=Object(r["O"])("SimpleKeyboard");return Object(r["F"])(),Object(r["k"])(u,{"onUpdate:modelValue":e.emitValue,modelValue:e.modelValue,"keyboard-class":"full-keyboard"},null,8,["onUpdate:modelValue","modelValue"])}n("d2db");var Ze=Object(r["p"])({name:"Keyboard",model:{prop:"input",event:"change"},components:{SimpleKeyboard:re},emits:["update:modelValue"],props:{modelValue:{type:String},modelModifiers:{default:function(){return{}}}},methods:{emitValue:function(e){var t=e;"uppercase"in this.modelModifiers&&(t=t.toUpperCase()),this.$emit("update:modelValue",t)}}});n("9dde");Ze.render=He;var Xe=Ze,Ye=Object(r["hb"])("data-v-1baacc23"),qe=Ye((function(e,t,n,o,a,c){var u=Object(r["O"])("el-table-column"),l=Object(r["O"])("el-table");return Object(r["F"])(),Object(r["k"])(l,{data:e.personen,"row-class-name":e.tableRowClassName,onRowClick:e.rowClick,"row-key":"socCieId"},{default:Ye((function(){return[Object(r["o"])(u,{prop:"bijnaam",label:"Bijnaam"}),Object(r["o"])(u,{prop:"naam",label:"Naam"}),Object(r["o"])(u,{prop:"saldo",label:"Saldo"},{default:Ye((function(t){return[Object(r["n"])(Object(r["S"])(e.formatBedrag(t.row.saldo)),1)]})),_:1})]})),_:1},8,["data","row-class-name","onRowClick"])})),Qe=(n("4de4"),n("466d"),Object(r["p"])({name:"LedenTable",props:{zoeken:String},computed:{personen:function(){return this.$store.getters.personenWeergave.filter(this.filterPersoon).slice(0,50)}},methods:{formatBedrag:se,rowClick:function(e){this.$router.push("/invoer/".concat(e.socCieId))},tableRowClassName:function(e){var t=e.row;return t.saldo<0?"error-row":"success-row"},filterPersoon:function(e){return e.bijnaam.toUpperCase().match(this.zoeken)||e.naam.toUpperCase().match(this.zoeken)}}}));Qe.render=qe,Qe.__scopeId="data-v-1baacc23";var et=Qe,tt=Object(r["p"])({name:"Personen",components:{LedenTable:et,Keyboard:Xe},data:function(){return{value:""}},computed:{upperValue:function(){return this.value.toUpperCase()}},methods:{change:function(e){this.value=e}}});n("fa96");tt.render=Ke;var nt=tt,rt=Object(r["n"])(" Producten "),ot=Object(r["n"])("Alle "),at=Object(r["o"])("div",{style:{margin:"15px 0"}},null,-1),ct=Object(r["n"])("Zoeken"),ut=Object(r["n"])("Bewerk "),lt=Object(r["n"])("Verwijder "),it=Object(r["n"])("Herstel ");function st(e,t,n,o,a,c){var u=Object(r["O"])("el-switch"),l=Object(r["O"])("el-col"),i=Object(r["O"])("el-date-picker"),s=Object(r["O"])("el-button"),d=Object(r["O"])("el-checkbox"),b=Object(r["O"])("el-row"),f=Object(r["O"])("el-checkbox-group"),p=Object(r["O"])("el-dialog"),O=Object(r["O"])("el-table-column"),j=Object(r["O"])("el-table");return Object(r["F"])(),Object(r["k"])(b,null,{default:Object(r["db"])((function(){return[Object(r["o"])(l,{span:8},{default:Object(r["db"])((function(){return[Object(r["o"])(u,{modelValue:e.zoekInAlles,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.zoekInAlles=t}),"inactive-text":"Geselecteerde persoon","active-text":"Alle personen"},null,8,["modelValue"])]})),_:1}),Object(r["o"])(l,{span:8},{default:Object(r["db"])((function(){return[Object(r["o"])(i,{modelValue:e.datum,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.datum=t}),type:"daterange","popper-class":"bar-datepicker","unlink-panels":"","range-separator":"tot","start-placeholder":"Start datum","end-placeholder":"Eind datum",shortcuts:e.shortcuts},null,8,["modelValue","shortcuts"])]})),_:1}),Object(r["o"])(l,{span:4},{default:Object(r["db"])((function(){return[Object(r["o"])(s,{title:"Filter op specifieke producten",type:e.isIndeterminate?"primary":"default",icon:"el-icon-set-up",size:"medium",onClick:t[3]||(t[3]=function(t){e.productSelectieZichtbaar=!0,e.productSelectieAlle=!1})},{default:Object(r["db"])((function(){return[rt]})),_:1},8,["type"]),Object(r["o"])(p,{title:"Selecteer producten",modelValue:e.productSelectieZichtbaar,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.productSelectieZichtbaar=t})},{default:Object(r["db"])((function(){return[Object(r["o"])(d,{indeterminate:e.isIndeterminate,modelValue:e.checkAll,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.checkAll=t}),onChange:e.handleCheckAllChange},{default:Object(r["db"])((function(){return[ot]})),_:1},8,["indeterminate","modelValue","onChange"]),at,Object(r["o"])(f,{modelValue:e.selectedProducten,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.selectedProducten=t}),onChange:e.handleCheckedProductenChange},{default:Object(r["db"])((function(){return[Object(r["o"])(b,null,{default:Object(r["db"])((function(){return[(Object(r["F"])(!0),Object(r["k"])(r["b"],null,Object(r["M"])(e.producten,(function(e){return Object(r["F"])(),Object(r["k"])(l,{span:4,key:e.productId},{default:Object(r["db"])((function(){return[Object(r["o"])(d,{label:e.productId},{default:Object(r["db"])((function(){return[Object(r["n"])(Object(r["S"])(e.beschrijving),1)]})),_:2},1032,["label"])]})),_:2},1024)})),128))]})),_:1})]})),_:1},8,["modelValue","onChange"])]})),_:1},8,["modelValue"])]})),_:1}),Object(r["o"])(l,{span:4},{default:Object(r["db"])((function(){return[Object(r["o"])(s,{onClick:e.zoeken,size:"medium"},{default:Object(r["db"])((function(){return[ct]})),_:1},8,["onClick"])]})),_:1}),Object(r["o"])(l,null,{default:Object(r["db"])((function(){return[Object(r["o"])(j,{data:e.bestellingen,"default-sort":{prop:"tijd",order:"descending"}},{default:Object(r["db"])((function(){return[Object(r["o"])(O,{label:"Naam",sortable:"",formatter:e.naamFormatter},null,8,["formatter"]),Object(r["o"])(O,{prop:"tijd",label:"Datum en tijd",sortable:""}),Object(r["o"])(O,{label:"Totaal",sortable:""},{default:Object(r["db"])((function(t){return[Object(r["n"])(Object(r["S"])(e.formatBedrag(t.row.bestelTotaal)),1)]})),_:1}),Object(r["o"])(O,{label:"Bestelling"},{default:Object(r["db"])((function(t){return[Object(r["o"])("ul",null,[(Object(r["F"])(!0),Object(r["k"])(r["b"],null,Object(r["M"])(e.getBestelLijstString(t.row.bestelLijst),(function(e){return Object(r["F"])(),Object(r["k"])("li",{key:e},Object(r["S"])(e),1)})),128))])]})),_:1}),Object(r["o"])(O,{label:"Opties"},{default:Object(r["db"])((function(t){return["0"===t.row.deleted?(Object(r["F"])(),Object(r["k"])(s,{key:0,size:"mini",onClick:function(n){return e.handleEdit(t.$index,t.row)}},{default:Object(r["db"])((function(){return[ut]})),_:2},1032,["onClick"])):Object(r["l"])("",!0),"0"===t.row.deleted?(Object(r["F"])(),Object(r["k"])(s,{key:1,size:"mini",type:"danger",loading:t.row.bestelId in e.verwijderLaden,onClick:function(n){return e.handleVerwijder(t.$index,t.row)}},{default:Object(r["db"])((function(){return[lt]})),_:2},1032,["loading","onClick"])):Object(r["l"])("",!0),"1"===t.row.deleted?(Object(r["F"])(),Object(r["k"])(s,{key:2,size:"mini",type:"warning",loading:t.row.bestelId in e.herstelLaden,onClick:function(n){return e.handleHerstel(t.$index,t.row)}},{default:Object(r["db"])((function(){return[it]})),_:2},1032,["loading","onClick"])):Object(r["l"])("",!0)]})),_:1})]})),_:1},8,["data"])]})),_:1})]})),_:1})}var dt=Object(r["p"])({name:"Bestellingen",computed:{bestellingen:function(){return Object.values(this.$store.state.bestelling.bestellingen)},producten:function(){return Object.values(this.$store.state.producten).filter((function(e){return"0"===e.beheer&&"1"===e.status}))}},data:function(){return{verwijderLaden:{},herstelLaden:{},productSelectieZichtbaar:!1,zoekInAlles:!0,datum:[new Date(+new Date-1296e6),new Date],selectedProducten:[],isIndeterminate:!1,checkAll:!1,shortcuts:[{text:"Afgelopen week",value:function(){var e=new Date,t=new Date;return t.setTime(t.getTime()-6048e5),[t,e]}()},{text:"Laatste 2 weken",value:function(){var e=new Date,t=new Date;return t.setTime(t.getTime()-1296e6),[t,e]}()},{text:"Afgelopen maand",value:function(){var e=new Date,t=new Date;return t.setTime(t.getTime()-2592e6),[t,e]}()},{text:"Laatste 3 maanden",value:function(){var e=new Date,t=new Date;return t.setTime(t.getTime()-7776e6),[t,e]}()}]}},methods:{naamFormatter:function(e){var t;return null===(t=this.getPersoon(e.persoon))||void 0===t?void 0:t.naam},getPersoon:function(e){return this.$store.state.personen[e]},getProduct:function(e){return this.$store.state.producten[e]},getBestelLijstString:function(e){var t=this;return Object.entries(e).map((function(e){var n,r=Object(Z["a"])(e,2),o=r[0],a=r[1];return"".concat(a," ").concat(null===(n=t.getProduct(o))||void 0===n?void 0:n.beschrijving)}))},formatBedrag:se,handleCheckedProductenChange:function(e){var t=e.length;this.checkAll=t===this.producten.length,this.isIndeterminate=t>0&&t<this.producten.length},handleCheckAllChange:function(e){this.selectedProducten=e?this.producten.map((function(e){return e.productId})):[],this.isIndeterminate=!1},handleEdit:function(e,t){this.$router.push("/invoer/".concat(t.persoon,"/bewerken/").concat(t.bestelId))},handleVerwijder:function(e,t){var n=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.verwijderLaden[t.bestelId]=!0,e.prev=1,e.next=4,n.$store.dispatch("verwijderBestelling",t);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](1),n.$message.error(e.t0.message);case 9:delete n.verwijderLaden[t.bestelId];case 10:case"end":return e.stop()}}),e,null,[[1,6]])})))()},handleHerstel:function(e,t){var n=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.herstelLaden[t.bestelId]=!0,e.prev=1,e.next=4,n.$store.dispatch("herstelBestelling",t);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](1),n.$message.error(e.t0.message);case 9:delete n.verwijderLaden[t.bestelId];case 10:case"end":return e.stop()}}),e,null,[[1,6]])})))()},zoeken:function(){var e,t;this.$store.dispatch("fetchBestellingen",{aantal:this.zoekInAlles?"alles":this.$store.state.user.selectie,begin:null===(e=this.datum[0])||void 0===e?void 0:e.toISOString(),eind:null===(t=this.datum[1])||void 0===t?void 0:t.toISOString(),productType:this.selectedProducten})}},created:function(){var e=this;setTimeout((function(){e.$store.dispatch("fetchBestellingen",{aantal:"alles",begin:"",eind:"",productType:[]})}),1e3)}});n("f2ba");dt.render=st;var bt=dt,ft=n("a78e"),pt=n.n(ft),Ot={sameSite:"strict"},jt=function(e){pt.a.set("token",JSON.stringify(e),Ot)},mt=function(){return pt.a.remove("token",Ot)},ht=function(){var e=pt.a.get("token");return e?JSON.parse(e):null},gt=function(){var e=ht();return e?new C["Token"]($,e):null},vt=function(e){return null==e?null:new C["Token"]($,e)},kt={sameSite:"strict",expires:new Date(+new Date+864e8)},wt=function(e){pt.a.set("locatie-token",JSON.stringify(e),kt)},yt=function(){pt.a.remove("locatie-token",kt)},St=function(){var e=pt.a.get("locatie-token");return e?JSON.parse(e):null},It=Object(r["hb"])("data-v-53660cd4");Object(r["I"])("data-v-53660cd4");var _t={key:0},xt={key:0},Ct=Object(r["n"])(" Deze locatie niet langer vertrouwen. "),Bt={key:1},Vt=Object(r["o"])("p",null," Door een locatie te vertrouwen wordt het mogelijk voor alle leden om in te loggen in het bar systeem. Gebruik deze functie alleen op vertrouwde plekken. ",-1),$t=Object(r["n"])("Vertrouw deze locatie");Object(r["G"])();var Tt=It((function(e,t,n,o,a,c){var u=Object(r["O"])("el-button"),l=Object(r["O"])("el-input"),i=Object(r["O"])("el-form-item"),s=Object(r["O"])("el-form");return Object(r["F"])(),Object(r["k"])(r["b"],null,[Object(r["o"])("h1",null,"Welkom in het bar systeem! "+Object(r["S"])(e.profielNaam),1),e.isAdmin?(Object(r["F"])(),Object(r["k"])("div",_t,[e.vertrouwd?(Object(r["F"])(),Object(r["k"])("div",xt,[Object(r["o"])("p",null,"Deze locatie is vertrouwd: "+Object(r["S"])(e.vertrouwd.naam),1),Object(r["o"])(u,{onClick:e.stopVertrouwen},{default:It((function(){return[Ct]})),_:1},8,["onClick"])])):(Object(r["F"])(),Object(r["k"])("div",Bt,[Vt,Object(r["o"])("p",null,[Object(r["o"])(s,{inline:!0,onSubmit:[t[2]||(t[2]=Object(r["gb"])((function(){}),["prevent"])),e.vertrouw]},{default:It((function(){return[Object(r["o"])(i,{label:"Naam van deze locatie"},{default:It((function(){return[Object(r["o"])(l,{modelValue:e.naam,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.naam=t})},null,8,["modelValue"])]})),_:1}),Object(r["o"])(i,null,{default:It((function(){return[Object(r["o"])(u,{type:"primary",onClick:e.vertrouw},{default:It((function(){return[$t]})),_:1},8,["onClick"])]})),_:1})]})),_:1},8,["onSubmit"])])]))])):Object(r["l"])("",!0)],64)})),Lt=(n("caad"),n("2532"),Object(r["p"])({name:"PostLogin",data:function(){return{naam:""}},computed:{profielNaam:function(){var e,t;return null!==(e=null===(t=this.$store.state.user.profiel)||void 0===t?void 0:t.displayName)&&void 0!==e?e:""},vertrouwd:function(){return this.$store.state.user.locatieToken},isAdmin:function(){var e,t;return null!==(e=null===(t=this.$store.state.user.profiel)||void 0===t?void 0:t.scopes.includes("BAR:TRUST"))&&void 0!==e&&e}},methods:{vertrouw:function(){this.$store.dispatch("vertrouwLocatie",this.naam)},stopVertrouwen:function(){this.$store.commit("setLocatieToken",null)}}}));Lt.render=Tt,Lt.__scopeId="data-v-53660cd4";var Pt=Lt,Rt=[{path:"/",name:"Home",component:Ae},{path:"/personen",name:"Persoonselectie",component:nt},{path:"/about",name:"About",component:function(){return n.e("about").then(n.bind(null,"f820"))}},{path:"/invoer/:socCieId",name:"Invoer",component:Be,props:!0},{path:"/invoer/:socCieId/bewerken/:bestellingId",name:"Invoer bewerken",component:Be,props:!0},{path:"/bestellingen",name:"Bestellingen",component:bt},{path:"/auth/csr",name:"Authorize",component:L},{path:"/auth/callback",name:"AuthCallback",component:F},{path:"/auth/logout",name:"Logout",component:We},{path:"/auth/post-login",name:"Welcome",component:Pt}],Nt=Object(I["a"])({history:Object(I["b"])("/"),routes:Rt});Nt.beforeEach((function(e,t,n){if("/"!==e.path&&!e.path.startsWith("/auth")){var r=gt();if(!r)return void n({path:"/"})}n()}));var Ft=Nt,At=(n("4e82"),n("c1f9"),n("5502")),Ut=n("5530"),zt=n("bc3a"),Dt=n.n(zt),Et=function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=gt(),n){e.next=5;break}return e.next=4,Ft.push("/auth/logout");case 4:throw new Error("Geen token");case 5:return e.prev=5,e.next=8,Dt()(n.sign(Object(Ut["a"])(Object(Ut["a"])({},t),{},{headers:Object(Ut["a"])(Object(Ut["a"])({},t.headers),{},{"Content-Type":"application/json","X-Bar-Token":St()}),url:"https://csrdelft.nl"+t.url})));case 8:return r=e.sent,e.abrupt("return",r.data);case 12:if(e.prev=12,e.t0=e["catch"](5),!e.t0.response||401!==e.t0.response.status){e.next=18;break}return e.next=17,Ft.push("/auth/logout");case 17:throw new Error("Niet ingelogd!");case 18:throw new Error(e.t0.message);case 19:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t){return e.apply(this,arguments)}}(),Gt=function(e){return e},Mt=Gt({state:function(){return{bestellingen:{}}},mutations:{setBestellingen:function(e,t){e.bestellingen=Object.fromEntries(Object.values(t).map((function(e){return[e.bestelId,e]})))},updateBestelling:function(e,t){e.bestellingen[t.bestelId]=t}},actions:{fetchBestellingen:function(e,t){return Object(p["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.state,n.next=3,Et({url:"/api/v3/bar/laadLaatste",method:"POST",data:JSON.stringify(t)});case 3:r.bestellingen=n.sent;case 4:case"end":return n.stop()}}),n)})))()},verwijderBestelling:function(e,t){return Object(p["a"])(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,n.next=3,Et({url:"/api/v3/bar/verwijderBestelling",method:"POST",data:JSON.stringify({verwijderBestelling:t})});case 3:if(o=n.sent,o){n.next=6;break}throw new Error("Verwijderen van bestelling mislukt");case 6:r("updateBestelling",Object(Ut["a"])(Object(Ut["a"])({},t),{},{deleted:"1"}));case 7:case"end":return n.stop()}}),n)})))()},herstelBestelling:function(e,t){return Object(p["a"])(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,n.next=3,Et({url:"/api/v3/bar/undoVerwijderBestelling",method:"POST",data:JSON.stringify({undoVerwijderBestelling:t})});case 3:if(o=n.sent,o){n.next=6;break}throw new Error("Herstellen van bestelling mislukt");case 6:r("updateBestelling",Object(Ut["a"])(Object(Ut["a"])({},t),{},{deleted:"0"}));case 7:case"end":return n.stop()}}),n)})))()}},getters:{}}),Wt=function(e){return e},Jt=Wt({state:function(){return{inhoud:{}}},mutations:{setInvoer:function(e,t){e.inhoud=Object.fromEntries(Object.values(t).map((function(e){return[e.product.productId,e]})))},selecteerInvoer:function(e,t){var n=t.product,r=t.aantal;n.productId in e.inhoud||(e.inhoud[n.productId]={product:n,aantal:0}),e.inhoud[n.productId].aantal+=Number(r)||1,0===e.inhoud[n.productId].aantal&&delete e.inhoud[n.productId]},verwijderInvoer:function(e,t){delete e.inhoud[t]},clearInvoer:function(e){e.inhoud={}}},actions:{plaatsBestelling:function(e,t){return Object(p["a"])(regeneratorRuntime.mark((function n(){var r,o,a,c,u,l,i,s,d,b,f,p,O,j;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.state,o=e.rootGetters,a=t.oudeInhoud,c=t.force,u=void 0!==c&&c,l=u,i=o.huidigePersoon,s=be(i),d=de.apply(void 0,Object(H["a"])(Object.values(r.inhoud).map((function(e){return e.aantal*Number(e.product.prijs)})))),a?(f=de.apply(void 0,Object(H["a"])(Object.values(a).map((function(e){return e.aantal*Number(e.product.prijs)})))),b=i.saldo+f-d<0):b=i.saldo-d<0,(d<=0||"S_NOBODY"===i.status)&&(b=!1),p=0===Object.values(r.inhoud).length,!s||!b){n.next=13;break}throw new Error("Oudleden kunnen niet rood staan, inleg vereist!");case 13:if(!i||p){n.next=26;break}if(l||!b){n.next=18;break}throw new fe("Laat lid inleggen. Saldo wordt negatief.");case 18:return O={persoon:i,bestelTotaal:d,bestelLijst:Object.fromEntries(Object.values(r.inhoud).map((function(e){return[e.product.productId,e.aantal]}))),oudeBestelling:a},n.next=21,Et({url:"/api/v3/bar/bestelling",method:"POST",data:{bestelling:JSON.stringify(O)}});case 21:if(j=n.sent,j){n.next=24;break}throw new Error('Er ging iets mis! "'.concat(j,'"'));case 24:n.next=28;break;case 26:if(!p){n.next=28;break}throw new Error("Geen bestelling ingevoerd!");case 28:case"end":return n.stop()}}),n)})))()}},getters:{}}),Kt=function(e){return e},Ht=Kt({state:function(){return{profiel:null,tokenData:null,selectie:null,locatieToken:null}},getters:{token:function(e){return vt(e.tokenData)},huidigePersoon:function(e,t,n){return e.selectie?n.personen[e.selectie]:null}},mutations:{setToken:function(e,t){e.tokenData=t},setLocatieToken:function(e,t){e.locatieToken=t},setProfiel:function(e,t){e.profiel=t},setSelectie:function(e,t){e.selectie=t}},actions:{fetchProfiel:function(e){return Object(p["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,Et({url:"/api/v3/profiel",method:"GET"});case 3:r=t.sent,n("setProfiel",r);case 5:case"end":return t.stop()}}),t)})))()}}}),Zt=function(e,t){return function(n){var r=ht();r&&n.commit(e,r);var o=St();o&&n.commit(t,o),n.subscribe((function(n){n.type===e&&(n.payload?jt(n.payload):mt()),n.type===t&&(n.payload?wt(n.payload):yt())}))}},Xt=Object(At["a"])({devtools:!0,plugins:[Zt("setToken","setLocatieToken")],state:function(){return{profiel:null,personen:{},producten:{}}},getters:{zichtbareProducten:function(e){return Object.values(e.producten).filter((function(e){return"0"===e.beheer&&"1"===e.status}))},personenWeergave:function(e){return Object.values(e.personen).filter((function(e){return"0"===e.deleted})).sort((function(e,t){return t.recent-e.recent}))}},mutations:{setPersonen:function(e,t){e.personen=t},setProducten:function(e,t){e.producten=t}},actions:{listUsers:function(e){return Object(p["a"])(regeneratorRuntime.mark((function t(){var n,r,o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,Et({url:"/api/v3/bar/personen",method:"POST"});case 3:r=t.sent,o=Object.values(r),a=Object.fromEntries(o.map((function(e){return[e.socCieId,e]}))),n("setPersonen",a);case 7:case"end":return t.stop()}}),t)})))()},listProducten:function(e){return Object(p["a"])(regeneratorRuntime.mark((function t(){var n,r,o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,Et({url:"/api/v3/bar/producten",method:"POST"});case 3:r=t.sent,o=Object.values(r),a=Object.fromEntries(o.map((function(e){return[e.productId,e]}))),n("setProducten",a);case 7:case"end":return t.stop()}}),t)})))()},postLogin:function(e){return Object(p["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.dispatch,t.next=3,n("fetchProfiel");case 3:return t.next=5,n("listUsers");case 5:return t.next=7,n("listProducten");case 7:case"end":return t.stop()}}),t)})))()},vertrouwLocatie:function(e,t){return Object(p["a"])(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,n.next=3,Et({url:"/api/v3/bar/trust",method:"POST",data:JSON.stringify({naam:t})});case 3:o=n.sent,r("setLocatieToken",o);case 5:case"end":return n.stop()}}),n)})))()}},modules:{bestelling:Mt,invoer:Jt,user:Ht}});n("e9ff");Object(r["j"])(S).use(o["a"],{locale:c.a}).use(Xt).use(Ft).mount("#app")},e9ff:function(e,t,n){},f2ba:function(e,t,n){"use strict";n("b37e")},fa96:function(e,t,n){"use strict";n("00a4")}});
//# sourceMappingURL=app.1f4a87d0.js.map